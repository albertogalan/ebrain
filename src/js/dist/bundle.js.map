{"version":3,"sources":["../../../../../../home/agalan/.npm-global/lib/node_modules/browserify/node_modules/browser-pack/_prelude.js","main.js","node_modules/money/money.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7hCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","//\n// function saveintobrowser(filename,html){\n//\n// // filename=$( \"#tittle\" ).val()\n// // html=evt.editor.getData()\n// // lack of sync into the server\n//   var db = new Dexie(\"m13\");\n//   db.version(1).stores({\n//     files: \"filename,html\"\n//   });\n//\n//   db.open().catch(function (e) {\n//      alert (\"Open failed: \" + e);});\n//\n//\n//   db.transaction(\"rw\", db.files, function () {\n//       // Update the register if exists if not add\n//      db.files.where(\"filename\").equals(filename).modify({html: html}).then(function(updated)\n//      {\n//        if (updated)\n//            console.log (\"pedro found and update\");\n//        else\n//        {\n//        console.log (\"pedro not found \");\n//        db.files.add({filename: $( \"#tittle\" ).val(), html:  evt.editor.getData()});} });   });\n//\n// };\n\n\nvar ctrlI = false;\nvar fx = require('money');\n// require('ckeditor');\n// CKEDITOR.replace( 'editor' );\n\n\n// Add an event listener\ndocument.addEventListener(\"name-of-event\", function(e) {\n    // console.log(e.detail); // Prints \"Example of an event\"\n});\n\n\n// $(\".videolink\").click(function(){\n\n//     var src = $(this).attr(\"value\");\n//    // alert(src);\n// // console.log(evt);\n// // console.log($(this));\n// // console.log(\"clicked videolink in ckeditor\");\n// loadVideo(src);\n\n\n// })\n\n// function loadVideo2(){\n\n//     console.log('clicked loadVideo2');\n// }\n\n\n$(document).ready(function() {\n\n    // var b1 = document.getElementById(\"MW\");\n    // b1.tabIndex = 5; //change the default tabindex\n\n\n\n    var url = getParameterByName('url');\n    if (url) {\n\n        // console.log(url);\n\n        $(\"#tittle\").val(url);\n        $(\"#rename\").val(url);\n        //  read();\n        //$(\".first_editor\").focus();\n        // $(\"#tittle\").focus().select();\n    } else {\n        $(\"#tittle\").focus().select();\n    }\n\n\n    // loadautosearch(\"/resources/files2.json\");\n\n\n    // $( \".first_editor h3\" ).click(function() {\n    //   alert('clicked');\n    //   $(this).nextUntil( \".first_editor h3, .first_editor h2\" ).toggle();\n    // });\n    // $( \".first_editor h4\" ).click(function() {\n    //   $(this).nextUntil( \".first_editor h4, .first_editor h3 \" ).toggle();\n    // });\n    //\n    // $( \"h2\" ).click(function() {\n    //   $(this).next( \"h2, h1\" ).toggle();\n    // });\n    //\n    // $( \"h1\" ).click(function() {\n    //   $(this).next( \"h1\" ).toggle();\n    // });\n\n\nwindow.addEventListener(\"keydown\", function (event) {\n  if (event.defaultPrevented) {\n    return; // Do nothing if the event was already processed\n  }\n\n  switch (event.key) {\n    case \"ArrowDown\":\n      // Do something for \"down arrow\" key press.\n      break;\n    case \"ArrowUp\":\n      // Do something for \"up arrow\" key press.\n      break;\n    case \"ArrowLeft\":\n      // Do something for \"left arrow\" key press.\n      break;\n    case \"ArrowRight\":\n      // Do something for \"right arrow\" key press.\n      break;\n    case \"Enter\":\n      // Do something for \"enter\" or \"return\" key press.\n      break;\n    case \"Escape\":\n      // Do something for \"esc\" key press.\n      console.log('press escape')\n             translate_select();\n      break;\n    default:\n      return; // Quit when this doesn't handle the key event.\n  }\n\n  // Cancel the default action to avoid it being handled twice\n  event.preventDefault();\n}, true);\n\n\nfunction translate_select(){\n\n\n        text = window.getSelection().toString()\n                console.log(text)\n        lang = 'zh'\n        langto = 'en'\n            console.log('doing translation')\n\n        fanyi(text, lang, langto).then(function(aa) {\n            console.log(aa.src)\n            aa.dst = aa.pinyin + \"<br>\" + aa.translate + aa.handi\n            var trad = '<div class=\"audiofanyi\">' + aa.audio + '</div>' +aa.src + ': </br> ' + aa.dst ;\n            $('#fanyi55').html(trad)\n        });\n\n}\n\n\n    $(\".jieba\").dblclick(function() {\n  \n\ntranslate_select()\n\n\n    })\n\n\n\n    $(\"button#puttogether\").click(function() {\n        sel = editor.extractSelectedHtml()\n        aa = sel.getHtml().replace(/<br>/gm, '')\n        editor.insertHtml(aa);\n    })\n\n    $(\"button#autotrans\").click(function() {\n        $(\"span[lang='zh-cn']\").css('color', 'red')\n        let lang = 'zh'\n        let langto = 'en'\n        let bb = $(\"span[lang='zh-cn']:eq(1)\").text()\n        console.log(`to translate: ${bb}`)\n        fanyi(bb, 'zh', 'en').then(function(aa) {\n            let translation = \"<span class='original' lang='\" + lang + \"' data-pseudo-content='\" + aa.src + \"' >&nbsp;</span><span class='translate'  lang='\" + langto + \"' >\" + aa.translate + \"</span>\"\n            console.log(aa.i)\n            $(\"span[lang='zh-cn']:eq(1)\").html(translation)\n            $(\"span[lang='zh-cn']:eq(1)\").attr('lang', '')\n        })\n\n    })\n\n\n\n    $(\"button#position\").click(function() {\n        console.log('clicked save position')\n        $(\"#scrollArea\").scrollTop()\n\n\n    });\n\n    $(\"button#trans\").click(function() {\n        console.log('clicked translate')\n        $(\".translate\").show();\n        $(\".original\").hide();\n\n\n    });\n\n    $(\"button#showtranslate\").click(function() {\n        console.log('clicked showtranslate')\n        $(\".translate\").show();\n        $(\".original\").show();\n\n    });\n\n\n    $(\"button#addabsolutepath\").click(function() {\n\n        console.log('clicked addabsolutepath2')\n\n\n        $('img').each(function(i, v) {\n            if ($(this).attr('src').includes(\"http\")) {\n                console.log('not change')\n\n            } else {\n                var aaa = document.location.origin + $(this).attr('src');\n                $(this).attr('src', aaa);\n                console.log($(this).attr('src'))\n            }\n        });\n\n    });\n\n    $(\"button#sharelink\").click(function() {\n\n\n        console.log('clicked sharelink ')\n        console.log(document.location.origin +\"/ebrain?url=\" + $('#tittle').val())\n\n        $.getJSON('ebrain?url=' + $('#tittle').val(),\n            function(data) {\n\n                $('#sharelink').attr('href', document.location.origin +'/view.php?url=' + data.hash)\n\n            })\n\n\n    });\n\n    $(\"button#updatecost\").click(function() {\n        console.log('clicked updatedcost ')\n\n        $.getJSON(\n            // NB: using Open Exchange Rates here, but you can use any source!\n            'https://openexchangerates.org/api/latest.json?app_id=960f0b8dca9344328b13ef816957d810',\n            function(data) {\n                // Check money.js has finished loading:\n                if (typeof fx !== \"undefined\" && fx.rates) {\n                    fx.rates = data.rates;\n                    fx.base = data.base;\n\n\n                    console.log('updating cost...')\n\n                    $('.cost').each(function(i, v) {\n                        aa = $(this).attr('data-cost')\n                        total = Math.round(fx(aa).from(\"CNY\").to(\"EUR\") / 0.0095) / 100;\n                        console.log(\"converting CNY into EUR\" + fx(1).from(\"CNY\").to(\"EUR\"));\n                        $(this).text(total)\n                    });\n\n                } else {\n                    // If not, apply  to fxSetup global:\n                    var fxSetup = {\n                        rates: data.rates,\n                        base: data.base\n                    }\n\n                }\n                var d = new Date();\n                var datetime = d.getFullYear() + '-' + d.getMonth() + '-' + d.getDate();\n                editor.insertHtml(\"<span class='information'> date: \" + datetime + \" CNY to EUR Convert rate is  \" + fx(1).from(\"CNY\").to(\"EUR\") + \"</span>\")\n            }\n        );\n\n\n\n\n\n\n    });\n    // https://openexchangerates.github.io/money.js/#download\n\n\n    $(\"#tittle\").focusout(function() {\n        // console.log('1');\n\n        console.log($(\"#tittle\").val());\n        $(\"#rename\").val($(\"#tittle\").val());\n        $('.first_editor').attr('id', $(\"#tittle\").val());\n        $('.first_editor').attr(\"contenteditable\", \"true\");\n        $('.first_editor').focus();\n        read();\n        // editor.setData($( \"#hidden\" ).html());  // load data in the editor\n\n        // hljs.initHighlightingOnLoad();\n\n    });\n\n\n\n\n    $(\"#rename\").focusout(function() {\n        // console.log('2');\n\n        if ($(\"#tittle\").val() == $(\"#rename\").val())\n\n            // editor.setData($( \"#hidden\" ).html());  // load data in the editor\n            read();\n        else {\n            rename();\n        }\n\n\n    });\n\n\n\n\n\n    CKEDITOR.instances['introduction'].destroy();\n    var editor = CKEDITOR.inline(\"introduction\");\n\n\n\n\n    document.addEventListener('paste', function(e) {\n        //    var html = e.clipboardData.getData (\"Text\");\n        // e.preventDefault();\n        //      if ( ctrlI ){\n        //        // CKEDITOR.instances['introduction'].destroy();\n        //        //\n        //        //    var editor = CKEDITOR.inline(\"introduction\");\n        //\n        //        console.log (\"paste event\");\n        //        // editor.insertHtml(html);\n        //      }\n        //    // var html = e.clipboardData.getData('text/html');\n        //    console.log(html);\n        //    // Whatever you want to do with the html\n    });\n\n\n    editor.on('paste', function(evt) {\n        evt.stop();\n        var data = evt.data.dataValue;\n\n        if (window.chrome || window.safari) {\n            // removing span wrapper on webkit browsers.\n            data = $(data).html();\n        }\n        evt.editor.insertHtml(data);\n    });\n\n\n\n    editor.on('key', function(evt) {\n        // console.log('3');\n        //http://stackoverflow.com/questions/4401469/how-to-select-a-text-range-in-ckeditor-programatically\n\n        var charCode = evt.data.keyCode; // at the moment this is wrong, keyCode needs to be properly converted to charCode\n        // var clipboardData = evt.data.dataValue;\n        console.log(charCode);\n        var tag = \"h1\";\n        //  console.log(selectedText);\n        switch (charCode) {\n            case 1114161: // Ctrl 1\n                tag = \"<h1></h1>\";\n                break;\n            case 1114162: // Ctrl 2\n                tag = \"<h2></h2>\";\n                break;\n            case 1114163: // Ctrl 3\n                tag = \"<h3></h3>\";\n                break;\n            case 1114164: // Ctrl 4\n                tag = \"<h4></h4>\";\n                break;\n            case 1114166: // Ctrl 6\n                tag = \"<h5></h5>\";\n                break;\n            case 1114169: // Ctrl 6\n                editor.insertHtml(\"<div class='savetofile'>put text</div>\");\n                break;\n\n            case 1114300: // Ctrl ,\n                console.log('convert Coin');\n\n                sel = editor.getSelection().getSelectedText()\n                console.log(sel)\n\n                editor.insertHtml(convertCoin(sel, \"yuan\", \"euro\"))\n                $('p:has(span.cost)').addClass('middle');\n\n                break;\n\n\n            case 1114304: // Ctrl `\n                console.log('request fanyi');\n                let lang = $(\"#lang\").val(),\n                    langto = $(\"#langto\").val()\n\n\n\n                sel = editor.getSelection().getSelectedText().replace(/(\\r\\n\\t|\\n|\\r\\t)/gm, \"\");\n                if (sel.length > 0) {\n                    fanyi(sel, lang, langto).then(function(aa) {\n                        let translation = \"<span class='original' lang='\" + lang + \"' data-pseudo-content='\" + aa.src + \"' >&nbsp;</span><span class='translate'  lang='\" + langto + \"' >\" + aa.translate + \"</span>\"\n                        editor.insertHtml(translation);\n                    })\n                }\n\n\n\n                break;\n\n\n\n\n            case 5570638: // Ctrl Alt N\n                // tag=\"<b></b>\";\n                tag = \"<em></em>\"; //emphasis\n                break;\n\n            case 5570637: // Ctrl Alt M\n                tag = \"<mark></mark>\";\n                break;\n            case 5570628: // Ctrl Alt D\n                var d = new Date();\n                var datetime = d.getFullYear() + '-' + d.getMonth() + '-' + d.getDate();\n                tag = \"<del datetime=\" + datetime + \" title=\" + datetime + \"></div>\"; //del text\n                break;\n            case 5570633: // Ctrl Alt I\n                tag = \"<em></em>\"; //emphasis\n                break;\n            case 2228314: // Shift Z   Test\n                $(\"#cke_3_top\").toggle();\n                break;\n            case 3342408: // CTRL Shift H  Hide/show tool bar\n                // evt.data.stopPropagation();\n                // evt.data.preventDefault();\n                $(\"#cke_3_top\").toggle();\n                break;\n            case 1114195: //Ctrl S save a version\n                version();\n                if ($('.savetofile').length > 0)\n                    save(evt, \"savetofile\");\n\n                break;\n\n            case 3342404: // Ctrl Shift D  Insert detail/Summary html\n                var sel = editor.getSelection().getSelectedText();\n                if (sel.length > 0) {\n                    var details = new CKEDITOR.dom.element('details');\n                    details.setHtml(' <summary>' + sel + '</summary><p>More info about the details.</p>');\n                    editor.insertElement(details);\n                }\n                break;\n            case 1114191: // Ctrl O  Open codeSnippet dialog\n                editor.execCommand('codeSnippet'); //widget\n                break;\n\n            case 1114185: // Ctrl I  Inserthtml\n                // var sel = editor.getSelection().getSelectedText();\n                ctrlI = !ctrlI;\n\n                // evt.data.dataValue = evt.data.dataValue\n                // editor.fire( 'paste',editor);\n                // console.log(e.clipboardData.getData('text/html'));\n\n                // This code obviously will not preserve the case of the first and last letters.\n                // Let it be an exercise for the reader ;).\n                // editor.execCommand( 'inserthtml4x');  //widget\n\n                break;\n\n            case 1114182: // Ctrl F open dialog Find and replace\n                editor.execCommand('find');\n                break;\n\n            case 3342402: // Ctrl Shift B\n                editor.insertHtml(\"<br/>\");\n                break;\n                // case 7798868:// Ctrl ALT SHIT T\n                //   editor.insertHtml( \"<table class=table1Class' > <tbody> \\\n                //      <tr><td>1</td><td>2</td></tr><tr><td>1</td><td>2</td></tr> \\\n                //      </tbody></table>\");\n                //   //  editor.insertHtml( clipboardData);\n                //     // console.log(clipboardData);\n                //    break;\n            case 3342422: // Ctrol shift V\n                texto = 'Crtl + SHIFT V'; // Ctrl 1\n                // text = window.clipboardData.getData(\"Text\");\n                // console.log(texto);\n                // editor.insertHtml( clipboardData);\n                // console.log(texto);\n                break;\n            default:\n                texto = 'Other key';\n        }\n\n\n        var keypress = [1114161, 1114162, 1114163, 1114164, 1114166, 1114169, 5570637, 5570628, 5570633, 5570638];\n        // console.log(keypress.indexOf(charCode));\n        if (keypress.indexOf(charCode) > -1) { // retag the select area\n            var sel = editor.getSelection().getSelectedText();\n            if (sel.length > 0) {\n                //  var newElement = new CKEDITOR.dom.element(tag);\n                var newElement = CKEDITOR.dom.element.createFromHtml(tag)\n                // newElement.setAttributes({style: ''});\n                newElement.setText(sel);\n                editor.insertElement(newElement);\n            } else {\n                var newElement = new CKEDITOR.dom.element(tag);\n                // newElement.setAttributes({style: ''});\n                newElement.setText(sel);\n                //  editor.insertElement(newElement).selectElement();\n                //  editor.getSelection().selectElement(newElement);\n\n            }\n        }\n\n\n    });\n\n\n\n\n\n    // override shortcut firefox keyboard\n    $('.first_editor').keypress(function(event) {\n\n        // console.log('4');\n\n\n        // console.log('evento es: '+ event.key +'shift: '+event.ctrlKey + 'crtl: '+ event.ctrlKey);\n        var a = event.key;\n        var b = event.ctrlKey;\n        var c = event.shiftKey;\n        var d = event.altKey;\n        var response = event.key + event.ctrlKey + event.shiftKey + event.altKey;\n        //  console.log(response);\n        // console.log(b);\n        switch (true) {\n\n\n            case (a == 'F' && b && c && d):\n                var sel = editor.getSelection().getSelectedText();\n                sel = sel.replace(/\\s+/g, '+');; //replace any space with +\n                openInNewTab('https://en.wikipedia.org/w/index.php?search=' + sel);\n                // console.log(sel);\n                break;\n\n            case (a == 'F' && b && c):\n                var sel = editor.getSelection().getSelectedText();\n                sel = sel.replace(/\\s+/g, '+');; //replace any space with +\n                openInNewTab('https://www.google.com/search?q=' + sel);\n                // console.log(sel);\n                break;\n\n\n            case (a == 'H' && b && c):\n            case (a == 's' && b):\n                event.preventDefault(); //avoid other shortcut keys\n                break;\n\n                // case (a == 'L' && b  && c) : // Ctrl Shift L\n                //      event.preventDefault(); //avoid other shortcut keys\n                //     text = editor.getClipboardData(\"Text\");\n                //\n                //      console.log(text);\n                //\n                // break;\n\n\n\n\n            case (a == 'i' && b && d): //Ctrl Alt i\n                editor.execCommand('mathjax'); //widget\n                break;\n\n            case (a == 'i' && b):\n                // console.log('press ctrl I');\n                event.preventDefault(); //avoid other shortcut keys\n\n                editor.execCommand('inserthtml4x'); //widget\n                break;\n\n\n\n        }\n\n\n        // if (event.key === 'H' && event.ctrlKey && event.shiftKey  )\n        //     event.preventDefault();\n        // if (event.key === 's' && event.ctrlKey  )\n        //     event.preventDefault();\n    });\n\n\n    editor.on('paste', function(evt) {\n\n        //\n        // if ( ctrlI == 1){\n        //\n        //   // var html = editor.getClipboardData(\"Text\");\n        //   // console.log (\"paste event\" + html);\n        //   // editor.insertHtml(html);\n        //   ctrlI=0;\n        //   editor.getClipboardData( { title: 'Get my data' }, function( data ) {\n        //       if ( data )\n        //           console.log( 'data is: ' + data.dataValue );\n        //   } );\n        //\n        // }\n        //\n\n\n\n\n        // highlightjsworkers();\n    });\n\n\n    editor.on('focus', function(evt) {\n        // highlightjsworkers();\n    });\n\n    editor.on('click', function(evt) {\n\n        console.log('click');\n\n    });\n\n    editor.on('doubleclick', function(evt) {\n        var element = evt.data.element;\n        //console.log('doubleclick');\n        classe = element.getAttribute(\"class\");\n        console.log('doubleclick in class ' + classe)\n        if (classe == 'jieba'){\n\n           translate_select();\n\n\n\n        }\n        if (classe == 'videolink') {\n            loadVideo(element);\n        }\n        classe = element.getAttribute(\"class\");\n        if (classe == 'videolink') {\n            loadVideo(element);\n        }\n        var tag = element.getName();\n        // console.log(tag);\n        if (tag == 'a') {\n            url = element.getAttribute(\"href\");\n            openInNewTab(url);\n            // console.log ('click link'+ url);\n\n        }\n\n    });\n\n\n\n\n    editor.on('blur', function(evt) {\n\n        console.log(\"blurr\");\n\n        save(evt, \"save\");\n        // editor.focus();\n\n    });\n\n\n    //change event\n    editor.on('change', function(evt) {\n        // console.log( 'Total bytes: ' + evt.editor.getData().length );\n        // console.log('saved'+$( \"#tittle\" ).val());\n        // $.post( \"/inc/save.php\", { editabledata: evt.editor.getData(), editorID: $( \"#tittle\" ).val() } );\n\n    });\n\n});\n\n\nfunction openInNewTab(url) {\n    var win = window.open(url, '_blank');\n    win.focus();\n}\n\nfunction hashCode(str) {\n    var hash = 0;\n    if (str.length == 0) return hash;\n    for (i = 0; i < str.length; i++) {\n        char = str.charCodeAt(i);\n        hash = ((hash << 5) - hash) + char;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n}\n\n\nfunction convertCoin(value, coin, tocoin) {\n    console.log('convertCoin')\n\n    let aa = \"<span data-cost='\" + value + \"' data-coin='\" + coin + \"' data-coin-convert='\" + tocoin + \"' class='cost'>To convert \" + coin + \" into \" + tocoin + \" \" + value + \"</span>\"\n    // $('td p:has(span.cost)').addClass('middle');\n    return aa\n}\n\n\nfunction doSomething() {\n    return new Promise((resolve, reject) => {\n        console.log(\"It is done.\");\n        // Succeed half of the time.\n        if (Math.random() > .5) {\n            resolve(\"SUCCESS\")\n        } else {\n            reject(\"FAILURE\")\n        }\n    })\n}\n\nfunction fanyi(text, lang, langto) {\n    return new Promise((resolve, reject) => {\n        console.log(`It is done. ${text} ${lang} ${langto}`);\n        // Succeed half of the time.\n        // lang = 'zh'\n        // langto = 'en'\n        var url = document.location.origin +'/fanyi'\n        var headers = {\n            \"Content-Type\": \"application/json\"\n        };\n        var data = {\n            \"from\": lang,\n            \"to\": langto,\n            \"src\": text,\n            \"i\": '1'\n        };\n        console.log('this is the text to translate ' + text)\n\n        var encode_params = $.param(data, true)\n        var url = url + '?' + encode_params\n\n        $.getJSON(url, function(data) {\n\n            resolve(data)\n        });\n\n\n    })\n\n}\n\n\n\n\n\n\nfunction message(str) {\n\n    $(\"#textinfo\").html(str).css({ opacity: 0.99 });\n    $(\"#textinfo\").animate({ opacity: 0 }, 1200);\n}\n\nfunction basename(path, suffix) {\n    var b = path\n    var lastChar = b.charAt(b.length - 1)\n\n    if (lastChar === '/' || lastChar === '\\\\') {\n        b = b.slice(0, -1)\n    }\n\n    b = b.replace(/^.*[\\/\\\\]/g, '')\n\n    if (typeof suffix === 'string' && b.substr(b.length - suffix.length) === suffix) {\n        b = b.substr(0, b.length - suffix.length)\n    }\n\n    return b\n}\n\n\nfunction dirname(path) {\n    return path.replace(/\\\\/g, '/').replace(/\\/[^\\/]*\\/?$/, '')\n}\n\nfunction agregatext(selector) {\n    var texts = '';\n\n    $(\".first_editor\").children(selector).each(function() {\n\n        $(this).children(\"p\").each(function() {\n\n            texts += $(this).text() + \"\\r\\n\";\n\n        });\n\n        var allListElements = $(\"li br\");\n\n        $(\".first_editor\").find(allListElements).each(function()\n            // $(this).nextAll(\"li\").each(function()\n            {\n                texts += \"  \" + $(this).contents().get(0).nodeValue + \"\\r\\n\";\n\n            });\n\n\n\n\n\n    });\n\n\n    return texts;\n}\n\n\n\n\n\n\nfunction save(evt, action) {\n\n\n    switch (action) {\n        case \"save\": // editor save content\n            console.log(\"editor save 2\");\n            $.post(\"/inc/save.php\", { action: \"save\", data: evt.editor.getData(), path: \"/data/rw1/m1\", file: $(\"#tittle\").val() });\n            //  to prevent time consuming\n            //  read();\n            message(\"file saved\");\n\n\n\n\n            break;\n        case \"savetofile\":\n            console.log(\"save text\");\n            var file = $(\".first_editor\").children(\".path\").text();\n            console.log(file);\n            message(\"file saved \" + file);\n\n\n            // var file = \"/data/m3/mm.mm\";\n            var path = dirname(file);\n            var file = basename(file, '');\n            // var data='';\n            // $(\"#savetofile\").each(function() {\n            //    data = data  +  $(this).val();\n            //    //code\n            // });\n            data = agregatext(\".savetofile\");\n            //  data=\"test\";\n            console.log(data);\n            console.log(path);\n            console.log(file);\n\n            $.post(\"/inc/save.php\", { action: \"save\", data: data, path: path, file: file });\n\n\n            // console.log(path.basename(str, '.html'));\n\n            break;\n        default:\n\n\n            console.log(\"save default\");\n\n    }\n\n\n\n\n    //  console.log(\"hascode is is: \" + hashCode($( \"#hidden\" ).text()));\n    // console.log (\"1 \" +hashCode($( \"#hidden\" ).text()));\n    // console.log (\"2 \" +$( \"#hash\" ).text());\n\n}\n\n\nfunction read() {\n\n\n\n    $.get('/m1/' + $(\"#tittle\").val(), { \"_\": $.now() }, function(data2) {\n        console.log(\"reading file \" + '/m1/' + $(\"#tittle\").val());\n\n\n        // console.log(data);\n        //  $('#hidden').html(data2);\n        $('.first_editor').html(data2);\n\n        highlightjsworkers();\n\n\n        // $('.first_editor').html(data);\n\n    }).done(function() {\n\n\n        // if (hashCode($( \"#hidden\" ).text()) == $( \"#hash\" ).text()   )\n        // message(\"no modifiations\");\n        // else {\n        //   message (\"saved!\")\n        //   $( \"#hash\" ).html(hashCode($( \"#hidden\" ).text()));}\n        //\n    }).fail(function() {\n        //$('.first_editor').html(\"<h1>error 404 no file</h1>\"); // or whatever\n    }, 'text');\n\n}\n\nfunction highlightjsworkers() {\n\n    // hljs.initHighlightingOnLoad();\n    $('pre code').each(function(i, block) {\n        hljs.highlightBlock(block);\n    });\n\n    //  var code = document.querySelector('pre code');\n    //  var worker = new Worker('/js/worker.js');\n    //  if (!worker.onmessage) {//avoid null object in case doesnt exists\n    //  worker.onmessage = function(event) { code.innerHTML = event.data; }\n    // // worker.postMessage(code.textContent);\n    // }\n};\n\n\n//rename file\nfunction rename() {\n\n    console.log(\"change this file: \" + $(\"#tittle\").val() + \" by this file: \" + $(\"#rename\").val());\n    $.post(\"/inc/save.php\", { action: \"rename\", file: $(\"#tittle\").val(), path: \"/data/rw1/m1\", fileout: $(\"#rename\").val() }, function() {\n            $(\"#tittle\").val($(\"#rename\").val());\n        })\n        .done(function() {\n            message(\"file renamed to \" + $(\"#rename\").val());\n        })\n        .fail(function() {\n            alert(\"error\");\n        });\n\n};\n\n\n//rename file\nfunction version() {\n\n    console.log(\"creating a new version of this: \" + $(\"#tittle\").val());\n\n    $.post(\"/inc/save.php\", { action: \"version\", file: $(\"#tittle\").val(), path: \"/data/rw1/m1\", fileout: $(\"#rename\").val() }, function() {\n            $(\"#tittle\").val($(\"#rename\").val());\n        })\n        .done(function() {\n            message(\"New version backed\");\n        })\n        .fail(function() {\n            alert(\"error\");\n        });\n\n};\n\n\n\n\n\n\nfunction loadautosearch(source) {\n\n    var options = {\n        url: source,\n        getValue: \"filename\",\n        // minLength: 3,\n        //  autoFocus: true,\n        //  my : \"100 100\",\n        //  at: \"bottom\" ,\n        //  of:\"#tittle\",\n\n        template: {\n            type: \"description\",\n            fields: {\n                // description: \"email\"\n            }\n        },\n        list: {\n            match: {\n                enabled: true\n            }\n        },\n\n        theme: \"plate-dark\"\n    };\n\n    $(\"#tittle\").easyAutocomplete(options);\n\n};\n\n\n\n\nfunction loadVideo(element) {\n\n    console.log('element is videolink');\n    console.log(element.getAttribute(\"value\"));\n    src = element.getAttribute(\"value\");\n    // $('video.videoread source').attr('src', src);\n    $('#my-player_html5_api').attr('src', src);\n    $('#my-player_html5_api').load();\n    $('#my-player_html5_api').play();\n    // $(\"video.videoread\")[0].load();\n    // $(\"video.videoread\")[0].play();\n    // evt.data.dialog = 'tableProperties'   ;\n\n}\n\n\n\nfunction getParameterByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\n\nfunction insertBaidumap() {\n\n\n    var map = new BMap.Map(\"allmap\"); // 创建Map实例\n    map.centerAndZoom(new BMap.Point(116.404, 39.915), 11); // 初始化地图,设置中心点坐标和地图级别\n    //添加地图类型控件\n    map.addControl(new BMap.MapTypeControl({\n        mapTypes: [\n            BMAP_NORMAL_MAP,\n            BMAP_HYBRID_MAP\n        ]\n    }));\n    map.setCurrentCity(\"北京\"); // 设置地图显示的城市 此项是必须设置的\n    map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\n\n}","/*!\n * money.js / fx() v0.2\n * Copyright 2014 Open Exchange Rates\n *\n * JavaScript library for realtime currency conversion and exchange rate calculation.\n *\n * Freely distributable under the MIT license.\n * Portions of money.js are inspired by or borrowed from underscore.js\n *\n * For details, examples and documentation:\n * http://openexchangerates.github.io/money.js/\n */\n(function(root, undefined) {\n\n\t// Create a safe reference to the money.js object for use below.\n\tvar fx = function(obj) {\n\t\treturn new fxWrapper(obj);\n\t};\n\n\t// Current version.\n\tfx.version = '0.2';\n\n\n\t/* --- Setup --- */\n\n\t// fxSetup can be defined before loading money.js, to set the exchange rates and the base\n\t// (and default from/to) currencies - or the rates can be loaded in later if needed.\n\tvar fxSetup = root.fxSetup || {\n\t\trates : {},\n\t\tbase : \"\"\n\t};\n\n\t// Object containing exchange rates relative to the fx.base currency, eg { \"GBP\" : \"0.64\" }\n\tfx.rates = fxSetup.rates;\n\n\t// Default exchange rate base currency (eg \"USD\"), which all the exchange rates are relative to\n\tfx.base = fxSetup.base;\n\n\t// Default from / to currencies for conversion via fx.convert():\n\tfx.settings = {\n\t\tfrom : fxSetup.from || fx.base,\n\t\tto : fxSetup.to || fx.base\n\t};\n\n\n\t/* --- Conversion --- */\n\n\t// The base function of the library: converts a value from one currency to another\n\tvar convert = fx.convert = function(val, opts) {\n\t\t// Convert arrays recursively\n\t\tif (typeof val === 'object' && val.length) {\n\t\t\tfor (var i = 0; i< val.length; i++ ) {\n\t\t\t\tval[i] = convert(val[i], opts);\n\t\t\t}\n\t\t\treturn val;\n\t\t}\n\n\t\t// Make sure we gots some opts\n\t\topts = opts || {};\n\n\t\t// We need to know the `from` and `to` currencies\n\t\tif( !opts.from ) opts.from = fx.settings.from;\n\t\tif( !opts.to ) opts.to = fx.settings.to;\n\n\t\t// Multiple the value by the exchange rate\n\t\treturn val * getRate( opts.to, opts.from );\n\t};\n\n\t// Returns the exchange rate to `target` currency from `base` currency\n\tvar getRate = function(to, from) {\n\t\t// Save bytes in minified version\n\t\tvar rates = fx.rates;\n\n\t\t// Make sure the base rate is in the rates object:\n\t\trates[fx.base] = 1;\n\n\t\t// Throw an error if either rate isn't in the rates array\n\t\tif ( !rates[to] || !rates[from] ) throw \"fx error\";\n\n\t\t// If `from` currency === fx.base, return the basic exchange rate for the `to` currency\n\t\tif ( from === fx.base ) {\n\t\t\treturn rates[to];\n\t\t}\n\n\t\t// If `to` currency === fx.base, return the basic inverse rate of the `from` currency\n\t\tif ( to === fx.base ) {\n\t\t\treturn 1 / rates[from];\n\t\t}\n\n\t\t// Otherwise, return the `to` rate multipled by the inverse of the `from` rate to get the\n\t\t// relative exchange rate between the two currencies\n\t\treturn rates[to] * (1 / rates[from]);\n\t};\n\n\n\t/* --- OOP wrapper and chaining --- */\n\n\t// If fx(val) is called as a function, it returns a wrapped object that can be used OO-style\n\tvar fxWrapper = function(val) {\n\t\t// Experimental: parse strings to pull out currency code and value:\n\t\tif ( typeof\tval === \"string\" ) {\n\t\t\tthis._v = parseFloat(val.replace(/[^0-9-.]/g, \"\"));\n\t\t\tthis._fx = val.replace(/([^A-Za-z])/g, \"\");\n\t\t} else {\n\t\t\tthis._v = val;\n\t\t}\n\t};\n\n\t// Expose `wrapper.prototype` as `fx.prototype`\n\tvar fxProto = fx.prototype = fxWrapper.prototype;\n\n\t// fx(val).convert(opts) does the same thing as fx.convert(val, opts)\n\tfxProto.convert = function() {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift(this._v);\n\t\treturn convert.apply(fx, args);\n\t};\n\n\t// fx(val).from(currency) returns a wrapped `fx` where the value has been converted from\n\t// `currency` to the `fx.base` currency. Should be followed by `.to(otherCurrency)`\n\tfxProto.from = function(currency) {\n\t\tvar wrapped = fx(convert(this._v, {from: currency, to: fx.base}));\n\t\twrapped._fx = fx.base;\n\t\treturn wrapped;\n\t};\n\n\t// fx(val).to(currency) returns the value, converted from `fx.base` to `currency`\n\tfxProto.to = function(currency) {\n\t\treturn convert(this._v, {from: this._fx ? this._fx : fx.settings.from, to: currency});\n\t};\n\n\n\t/* --- Module Definition --- */\n\n\t// Export the fx object for CommonJS. If being loaded as an AMD module, define it as such.\n\t// Otherwise, just add `fx` to the global object\n\tif (typeof exports !== 'undefined') {\n\t\tif (typeof module !== 'undefined' && module.exports) {\n\t\t\texports = module.exports = fx;\n\t\t}\n\t\texports.fx = fx;\n\t} else if (typeof define === 'function' && define.amd) {\n\t\t// Return the library as an AMD module:\n\t\tdefine([], function() {\n\t\t\treturn fx;\n\t\t});\n\t} else {\n\t\t// Use fx.noConflict to restore `fx` back to its original value before money.js loaded.\n\t\t// Returns a reference to the library's `fx` object; e.g. `var money = fx.noConflict();`\n\t\tfx.noConflict = (function(previousFx) {\n\t\t\treturn function() {\n\t\t\t\t// Reset the value of the root's `fx` variable:\n\t\t\t\troot.fx = previousFx;\n\t\t\t\t// Delete the noConflict function:\n\t\t\t\tfx.noConflict = undefined;\n\t\t\t\t// Return reference to the library to re-assign it:\n\t\t\t\treturn fx;\n\t\t\t};\n\t\t})(root.fx);\n\n\t\t// Declare `fx` on the root (global/window) object:\n\t\troot['fx'] = fx;\n\t}\n\n\t// Root will be `window` in browser or `global` on the server:\n}(this));\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2hvbWUvYWdhbGFuLy5ucG0tZ2xvYmFsL2xpYi9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwibWFpbi5qcyIsIm5vZGVfbW9kdWxlcy9tb25leS9tb25leS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vXG4vLyBmdW5jdGlvbiBzYXZlaW50b2Jyb3dzZXIoZmlsZW5hbWUsaHRtbCl7XG4vL1xuLy8gLy8gZmlsZW5hbWU9JCggXCIjdGl0dGxlXCIgKS52YWwoKVxuLy8gLy8gaHRtbD1ldnQuZWRpdG9yLmdldERhdGEoKVxuLy8gLy8gbGFjayBvZiBzeW5jIGludG8gdGhlIHNlcnZlclxuLy8gICB2YXIgZGIgPSBuZXcgRGV4aWUoXCJtMTNcIik7XG4vLyAgIGRiLnZlcnNpb24oMSkuc3RvcmVzKHtcbi8vICAgICBmaWxlczogXCJmaWxlbmFtZSxodG1sXCJcbi8vICAgfSk7XG4vL1xuLy8gICBkYi5vcGVuKCkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbi8vICAgICAgYWxlcnQgKFwiT3BlbiBmYWlsZWQ6IFwiICsgZSk7fSk7XG4vL1xuLy9cbi8vICAgZGIudHJhbnNhY3Rpb24oXCJyd1wiLCBkYi5maWxlcywgZnVuY3Rpb24gKCkge1xuLy8gICAgICAgLy8gVXBkYXRlIHRoZSByZWdpc3RlciBpZiBleGlzdHMgaWYgbm90IGFkZFxuLy8gICAgICBkYi5maWxlcy53aGVyZShcImZpbGVuYW1lXCIpLmVxdWFscyhmaWxlbmFtZSkubW9kaWZ5KHtodG1sOiBodG1sfSkudGhlbihmdW5jdGlvbih1cGRhdGVkKVxuLy8gICAgICB7XG4vLyAgICAgICAgaWYgKHVwZGF0ZWQpXG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nIChcInBlZHJvIGZvdW5kIGFuZCB1cGRhdGVcIik7XG4vLyAgICAgICAgZWxzZVxuLy8gICAgICAgIHtcbi8vICAgICAgICBjb25zb2xlLmxvZyAoXCJwZWRybyBub3QgZm91bmQgXCIpO1xuLy8gICAgICAgIGRiLmZpbGVzLmFkZCh7ZmlsZW5hbWU6ICQoIFwiI3RpdHRsZVwiICkudmFsKCksIGh0bWw6ICBldnQuZWRpdG9yLmdldERhdGEoKX0pO30gfSk7ICAgfSk7XG4vL1xuLy8gfTtcblxuXG52YXIgY3RybEkgPSBmYWxzZTtcbnZhciBmeCA9IHJlcXVpcmUoJ21vbmV5Jyk7XG4vLyByZXF1aXJlKCdja2VkaXRvcicpO1xuLy8gQ0tFRElUT1IucmVwbGFjZSggJ2VkaXRvcicgKTtcblxuXG4vLyBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJuYW1lLW9mLWV2ZW50XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhlLmRldGFpbCk7IC8vIFByaW50cyBcIkV4YW1wbGUgb2YgYW4gZXZlbnRcIlxufSk7XG5cblxuLy8gJChcIi52aWRlb2xpbmtcIikuY2xpY2soZnVuY3Rpb24oKXtcblxuLy8gICAgIHZhciBzcmMgPSAkKHRoaXMpLmF0dHIoXCJ2YWx1ZVwiKTtcbi8vICAgIC8vIGFsZXJ0KHNyYyk7XG4vLyAvLyBjb25zb2xlLmxvZyhldnQpO1xuLy8gLy8gY29uc29sZS5sb2coJCh0aGlzKSk7XG4vLyAvLyBjb25zb2xlLmxvZyhcImNsaWNrZWQgdmlkZW9saW5rIGluIGNrZWRpdG9yXCIpO1xuLy8gbG9hZFZpZGVvKHNyYyk7XG5cblxuLy8gfSlcblxuLy8gZnVuY3Rpb24gbG9hZFZpZGVvMigpe1xuXG4vLyAgICAgY29uc29sZS5sb2coJ2NsaWNrZWQgbG9hZFZpZGVvMicpO1xuLy8gfVxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gdmFyIGIxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJNV1wiKTtcbiAgICAvLyBiMS50YWJJbmRleCA9IDU7IC8vY2hhbmdlIHRoZSBkZWZhdWx0IHRhYmluZGV4XG5cblxuXG4gICAgdmFyIHVybCA9IGdldFBhcmFtZXRlckJ5TmFtZSgndXJsJyk7XG4gICAgaWYgKHVybCkge1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHVybCk7XG5cbiAgICAgICAgJChcIiN0aXR0bGVcIikudmFsKHVybCk7XG4gICAgICAgICQoXCIjcmVuYW1lXCIpLnZhbCh1cmwpO1xuICAgICAgICAvLyAgcmVhZCgpO1xuICAgICAgICAvLyQoXCIuZmlyc3RfZWRpdG9yXCIpLmZvY3VzKCk7XG4gICAgICAgIC8vICQoXCIjdGl0dGxlXCIpLmZvY3VzKCkuc2VsZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiN0aXR0bGVcIikuZm9jdXMoKS5zZWxlY3QoKTtcbiAgICB9XG5cblxuICAgIC8vIGxvYWRhdXRvc2VhcmNoKFwiL3Jlc291cmNlcy9maWxlczIuanNvblwiKTtcblxuXG4gICAgLy8gJCggXCIuZmlyc3RfZWRpdG9yIGgzXCIgKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAvLyAgIGFsZXJ0KCdjbGlja2VkJyk7XG4gICAgLy8gICAkKHRoaXMpLm5leHRVbnRpbCggXCIuZmlyc3RfZWRpdG9yIGgzLCAuZmlyc3RfZWRpdG9yIGgyXCIgKS50b2dnbGUoKTtcbiAgICAvLyB9KTtcbiAgICAvLyAkKCBcIi5maXJzdF9lZGl0b3IgaDRcIiApLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgJCh0aGlzKS5uZXh0VW50aWwoIFwiLmZpcnN0X2VkaXRvciBoNCwgLmZpcnN0X2VkaXRvciBoMyBcIiApLnRvZ2dsZSgpO1xuICAgIC8vIH0pO1xuICAgIC8vXG4gICAgLy8gJCggXCJoMlwiICkuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgLy8gICAkKHRoaXMpLm5leHQoIFwiaDIsIGgxXCIgKS50b2dnbGUoKTtcbiAgICAvLyB9KTtcbiAgICAvL1xuICAgIC8vICQoIFwiaDFcIiApLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgJCh0aGlzKS5uZXh0KCBcImgxXCIgKS50b2dnbGUoKTtcbiAgICAvLyB9KTtcblxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgcmV0dXJuOyAvLyBEbyBub3RoaW5nIGlmIHRoZSBldmVudCB3YXMgYWxyZWFkeSBwcm9jZXNzZWRcbiAgfVxuXG4gIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgY2FzZSBcIkFycm93RG93blwiOlxuICAgICAgLy8gRG8gc29tZXRoaW5nIGZvciBcImRvd24gYXJyb3dcIiBrZXkgcHJlc3MuXG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgLy8gRG8gc29tZXRoaW5nIGZvciBcInVwIGFycm93XCIga2V5IHByZXNzLlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgLy8gRG8gc29tZXRoaW5nIGZvciBcImxlZnQgYXJyb3dcIiBrZXkgcHJlc3MuXG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgLy8gRG8gc29tZXRoaW5nIGZvciBcInJpZ2h0IGFycm93XCIga2V5IHByZXNzLlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIkVudGVyXCI6XG4gICAgICAvLyBEbyBzb21ldGhpbmcgZm9yIFwiZW50ZXJcIiBvciBcInJldHVyblwiIGtleSBwcmVzcy5cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJFc2NhcGVcIjpcbiAgICAgIC8vIERvIHNvbWV0aGluZyBmb3IgXCJlc2NcIiBrZXkgcHJlc3MuXG4gICAgICBjb25zb2xlLmxvZygncHJlc3MgZXNjYXBlJylcbiAgICAgICAgICAgICB0cmFuc2xhdGVfc2VsZWN0KCk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuOyAvLyBRdWl0IHdoZW4gdGhpcyBkb2Vzbid0IGhhbmRsZSB0aGUga2V5IGV2ZW50LlxuICB9XG5cbiAgLy8gQ2FuY2VsIHRoZSBkZWZhdWx0IGFjdGlvbiB0byBhdm9pZCBpdCBiZWluZyBoYW5kbGVkIHR3aWNlXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59LCB0cnVlKTtcblxuXG5mdW5jdGlvbiB0cmFuc2xhdGVfc2VsZWN0KCl7XG5cblxuICAgICAgICB0ZXh0ID0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KVxuICAgICAgICBsYW5nID0gJ3poJ1xuICAgICAgICBsYW5ndG8gPSAnZW4nXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZG9pbmcgdHJhbnNsYXRpb24nKVxuXG4gICAgICAgIGZhbnlpKHRleHQsIGxhbmcsIGxhbmd0bykudGhlbihmdW5jdGlvbihhYSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYWEuc3JjKVxuICAgICAgICAgICAgYWEuZHN0ID0gYWEucGlueWluICsgXCI8YnI+XCIgKyBhYS50cmFuc2xhdGUgKyBhYS5oYW5kaVxuICAgICAgICAgICAgdmFyIHRyYWQgPSAnPGRpdiBjbGFzcz1cImF1ZGlvZmFueWlcIj4nICsgYWEuYXVkaW8gKyAnPC9kaXY+JyArYWEuc3JjICsgJzogPC9icj4gJyArIGFhLmRzdCA7XG4gICAgICAgICAgICAkKCcjZmFueWk1NScpLmh0bWwodHJhZClcbiAgICAgICAgfSk7XG5cbn1cblxuXG4gICAgJChcIi5qaWViYVwiKS5kYmxjbGljayhmdW5jdGlvbigpIHtcbiAgXG5cbnRyYW5zbGF0ZV9zZWxlY3QoKVxuXG5cbiAgICB9KVxuXG5cblxuICAgICQoXCJidXR0b24jcHV0dG9nZXRoZXJcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbCA9IGVkaXRvci5leHRyYWN0U2VsZWN0ZWRIdG1sKClcbiAgICAgICAgYWEgPSBzZWwuZ2V0SHRtbCgpLnJlcGxhY2UoLzxicj4vZ20sICcnKVxuICAgICAgICBlZGl0b3IuaW5zZXJ0SHRtbChhYSk7XG4gICAgfSlcblxuICAgICQoXCJidXR0b24jYXV0b3RyYW5zXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwic3BhbltsYW5nPSd6aC1jbiddXCIpLmNzcygnY29sb3InLCAncmVkJylcbiAgICAgICAgbGV0IGxhbmcgPSAnemgnXG4gICAgICAgIGxldCBsYW5ndG8gPSAnZW4nXG4gICAgICAgIGxldCBiYiA9ICQoXCJzcGFuW2xhbmc9J3poLWNuJ106ZXEoMSlcIikudGV4dCgpXG4gICAgICAgIGNvbnNvbGUubG9nKGB0byB0cmFuc2xhdGU6ICR7YmJ9YClcbiAgICAgICAgZmFueWkoYmIsICd6aCcsICdlbicpLnRoZW4oZnVuY3Rpb24oYWEpIHtcbiAgICAgICAgICAgIGxldCB0cmFuc2xhdGlvbiA9IFwiPHNwYW4gY2xhc3M9J29yaWdpbmFsJyBsYW5nPSdcIiArIGxhbmcgKyBcIicgZGF0YS1wc2V1ZG8tY29udGVudD0nXCIgKyBhYS5zcmMgKyBcIicgPiZuYnNwOzwvc3Bhbj48c3BhbiBjbGFzcz0ndHJhbnNsYXRlJyAgbGFuZz0nXCIgKyBsYW5ndG8gKyBcIicgPlwiICsgYWEudHJhbnNsYXRlICsgXCI8L3NwYW4+XCJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFhLmkpXG4gICAgICAgICAgICAkKFwic3BhbltsYW5nPSd6aC1jbiddOmVxKDEpXCIpLmh0bWwodHJhbnNsYXRpb24pXG4gICAgICAgICAgICAkKFwic3BhbltsYW5nPSd6aC1jbiddOmVxKDEpXCIpLmF0dHIoJ2xhbmcnLCAnJylcbiAgICAgICAgfSlcblxuICAgIH0pXG5cblxuXG4gICAgJChcImJ1dHRvbiNwb3NpdGlvblwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrZWQgc2F2ZSBwb3NpdGlvbicpXG4gICAgICAgICQoXCIjc2Nyb2xsQXJlYVwiKS5zY3JvbGxUb3AoKVxuXG5cbiAgICB9KTtcblxuICAgICQoXCJidXR0b24jdHJhbnNcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGlja2VkIHRyYW5zbGF0ZScpXG4gICAgICAgICQoXCIudHJhbnNsYXRlXCIpLnNob3coKTtcbiAgICAgICAgJChcIi5vcmlnaW5hbFwiKS5oaWRlKCk7XG5cblxuICAgIH0pO1xuXG4gICAgJChcImJ1dHRvbiNzaG93dHJhbnNsYXRlXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBzaG93dHJhbnNsYXRlJylcbiAgICAgICAgJChcIi50cmFuc2xhdGVcIikuc2hvdygpO1xuICAgICAgICAkKFwiLm9yaWdpbmFsXCIpLnNob3coKTtcblxuICAgIH0pO1xuXG5cbiAgICAkKFwiYnV0dG9uI2FkZGFic29sdXRlcGF0aFwiKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBhZGRhYnNvbHV0ZXBhdGgyJylcblxuXG4gICAgICAgICQoJ2ltZycpLmVhY2goZnVuY3Rpb24oaSwgdikge1xuICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykuaW5jbHVkZXMoXCJodHRwXCIpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vdCBjaGFuZ2UnKVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhYWEgPSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gKyAkKHRoaXMpLmF0dHIoJ3NyYycpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignc3JjJywgYWFhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKHRoaXMpLmF0dHIoJ3NyYycpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgJChcImJ1dHRvbiNzaGFyZWxpbmtcIikuY2xpY2soZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCBzaGFyZWxpbmsgJylcbiAgICAgICAgY29uc29sZS5sb2coZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luICtcIi9lYnJhaW4/dXJsPVwiICsgJCgnI3RpdHRsZScpLnZhbCgpKVxuXG4gICAgICAgICQuZ2V0SlNPTignZWJyYWluP3VybD0nICsgJCgnI3RpdHRsZScpLnZhbCgpLFxuICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgJCgnI3NoYXJlbGluaycpLmF0dHIoJ2hyZWYnLCBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gKycvdmlldy5waHA/dXJsPScgKyBkYXRhLmhhc2gpXG5cbiAgICAgICAgICAgIH0pXG5cblxuICAgIH0pO1xuXG4gICAgJChcImJ1dHRvbiN1cGRhdGVjb3N0XCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCB1cGRhdGVkY29zdCAnKVxuXG4gICAgICAgICQuZ2V0SlNPTihcbiAgICAgICAgICAgIC8vIE5COiB1c2luZyBPcGVuIEV4Y2hhbmdlIFJhdGVzIGhlcmUsIGJ1dCB5b3UgY2FuIHVzZSBhbnkgc291cmNlIVxuICAgICAgICAgICAgJ2h0dHBzOi8vb3BlbmV4Y2hhbmdlcmF0ZXMub3JnL2FwaS9sYXRlc3QuanNvbj9hcHBfaWQ9OTYwZjBiOGRjYTkzNDQzMjhiMTNlZjgxNjk1N2Q4MTAnLFxuICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIG1vbmV5LmpzIGhhcyBmaW5pc2hlZCBsb2FkaW5nOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZnggIT09IFwidW5kZWZpbmVkXCIgJiYgZngucmF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZngucmF0ZXMgPSBkYXRhLnJhdGVzO1xuICAgICAgICAgICAgICAgICAgICBmeC5iYXNlID0gZGF0YS5iYXNlO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwZGF0aW5nIGNvc3QuLi4nKVxuXG4gICAgICAgICAgICAgICAgICAgICQoJy5jb3N0JykuZWFjaChmdW5jdGlvbihpLCB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhYSA9ICQodGhpcykuYXR0cignZGF0YS1jb3N0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gTWF0aC5yb3VuZChmeChhYSkuZnJvbShcIkNOWVwiKS50byhcIkVVUlwiKSAvIDAuMDA5NSkgLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbnZlcnRpbmcgQ05ZIGludG8gRVVSXCIgKyBmeCgxKS5mcm9tKFwiQ05ZXCIpLnRvKFwiRVVSXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudGV4dCh0b3RhbClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3QsIGFwcGx5ICB0byBmeFNldHVwIGdsb2JhbDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZ4U2V0dXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXRlczogZGF0YS5yYXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IGRhdGEuYmFzZVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRldGltZSA9IGQuZ2V0RnVsbFllYXIoKSArICctJyArIGQuZ2V0TW9udGgoKSArICctJyArIGQuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRIdG1sKFwiPHNwYW4gY2xhc3M9J2luZm9ybWF0aW9uJz4gZGF0ZTogXCIgKyBkYXRldGltZSArIFwiIENOWSB0byBFVVIgQ29udmVydCByYXRlIGlzICBcIiArIGZ4KDEpLmZyb20oXCJDTllcIikudG8oXCJFVVJcIikgKyBcIjwvc3Bhbj5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuXG5cblxuXG5cbiAgICB9KTtcbiAgICAvLyBodHRwczovL29wZW5leGNoYW5nZXJhdGVzLmdpdGh1Yi5pby9tb25leS5qcy8jZG93bmxvYWRcblxuXG4gICAgJChcIiN0aXR0bGVcIikuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcxJyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJChcIiN0aXR0bGVcIikudmFsKCkpO1xuICAgICAgICAkKFwiI3JlbmFtZVwiKS52YWwoJChcIiN0aXR0bGVcIikudmFsKCkpO1xuICAgICAgICAkKCcuZmlyc3RfZWRpdG9yJykuYXR0cignaWQnLCAkKFwiI3RpdHRsZVwiKS52YWwoKSk7XG4gICAgICAgICQoJy5maXJzdF9lZGl0b3InKS5hdHRyKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgJCgnLmZpcnN0X2VkaXRvcicpLmZvY3VzKCk7XG4gICAgICAgIHJlYWQoKTtcbiAgICAgICAgLy8gZWRpdG9yLnNldERhdGEoJCggXCIjaGlkZGVuXCIgKS5odG1sKCkpOyAgLy8gbG9hZCBkYXRhIGluIHRoZSBlZGl0b3JcblxuICAgICAgICAvLyBobGpzLmluaXRIaWdobGlnaHRpbmdPbkxvYWQoKTtcblxuICAgIH0pO1xuXG5cblxuXG4gICAgJChcIiNyZW5hbWVcIikuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcyJyk7XG5cbiAgICAgICAgaWYgKCQoXCIjdGl0dGxlXCIpLnZhbCgpID09ICQoXCIjcmVuYW1lXCIpLnZhbCgpKVxuXG4gICAgICAgICAgICAvLyBlZGl0b3Iuc2V0RGF0YSgkKCBcIiNoaWRkZW5cIiApLmh0bWwoKSk7ICAvLyBsb2FkIGRhdGEgaW4gdGhlIGVkaXRvclxuICAgICAgICAgICAgcmVhZCgpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmFtZSgpO1xuICAgICAgICB9XG5cblxuICAgIH0pO1xuXG5cblxuXG5cbiAgICBDS0VESVRPUi5pbnN0YW5jZXNbJ2ludHJvZHVjdGlvbiddLmRlc3Ryb3koKTtcbiAgICB2YXIgZWRpdG9yID0gQ0tFRElUT1IuaW5saW5lKFwiaW50cm9kdWN0aW9uXCIpO1xuXG5cblxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vICAgIHZhciBodG1sID0gZS5jbGlwYm9hcmREYXRhLmdldERhdGEgKFwiVGV4dFwiKTtcbiAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyAgICAgIGlmICggY3RybEkgKXtcbiAgICAgICAgLy8gICAgICAgIC8vIENLRURJVE9SLmluc3RhbmNlc1snaW50cm9kdWN0aW9uJ10uZGVzdHJveSgpO1xuICAgICAgICAvLyAgICAgICAgLy9cbiAgICAgICAgLy8gICAgICAgIC8vICAgIHZhciBlZGl0b3IgPSBDS0VESVRPUi5pbmxpbmUoXCJpbnRyb2R1Y3Rpb25cIik7XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICAgICBjb25zb2xlLmxvZyAoXCJwYXN0ZSBldmVudFwiKTtcbiAgICAgICAgLy8gICAgICAgIC8vIGVkaXRvci5pbnNlcnRIdG1sKGh0bWwpO1xuICAgICAgICAvLyAgICAgIH1cbiAgICAgICAgLy8gICAgLy8gdmFyIGh0bWwgPSBlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9odG1sJyk7XG4gICAgICAgIC8vICAgIGNvbnNvbGUubG9nKGh0bWwpO1xuICAgICAgICAvLyAgICAvLyBXaGF0ZXZlciB5b3Ugd2FudCB0byBkbyB3aXRoIHRoZSBodG1sXG4gICAgfSk7XG5cblxuICAgIGVkaXRvci5vbigncGFzdGUnLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgZXZ0LnN0b3AoKTtcbiAgICAgICAgdmFyIGRhdGEgPSBldnQuZGF0YS5kYXRhVmFsdWU7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5jaHJvbWUgfHwgd2luZG93LnNhZmFyaSkge1xuICAgICAgICAgICAgLy8gcmVtb3Zpbmcgc3BhbiB3cmFwcGVyIG9uIHdlYmtpdCBicm93c2Vycy5cbiAgICAgICAgICAgIGRhdGEgPSAkKGRhdGEpLmh0bWwoKTtcbiAgICAgICAgfVxuICAgICAgICBldnQuZWRpdG9yLmluc2VydEh0bWwoZGF0YSk7XG4gICAgfSk7XG5cblxuXG4gICAgZWRpdG9yLm9uKCdrZXknLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJzMnKTtcbiAgICAgICAgLy9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ0MDE0NjkvaG93LXRvLXNlbGVjdC1hLXRleHQtcmFuZ2UtaW4tY2tlZGl0b3ItcHJvZ3JhbWF0aWNhbGx5XG5cbiAgICAgICAgdmFyIGNoYXJDb2RlID0gZXZ0LmRhdGEua2V5Q29kZTsgLy8gYXQgdGhlIG1vbWVudCB0aGlzIGlzIHdyb25nLCBrZXlDb2RlIG5lZWRzIHRvIGJlIHByb3Blcmx5IGNvbnZlcnRlZCB0byBjaGFyQ29kZVxuICAgICAgICAvLyB2YXIgY2xpcGJvYXJkRGF0YSA9IGV2dC5kYXRhLmRhdGFWYWx1ZTtcbiAgICAgICAgY29uc29sZS5sb2coY2hhckNvZGUpO1xuICAgICAgICB2YXIgdGFnID0gXCJoMVwiO1xuICAgICAgICAvLyAgY29uc29sZS5sb2coc2VsZWN0ZWRUZXh0KTtcbiAgICAgICAgc3dpdGNoIChjaGFyQ29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMTE0MTYxOiAvLyBDdHJsIDFcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxoMT48L2gxPlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTE0MTYyOiAvLyBDdHJsIDJcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxoMj48L2gyPlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTE0MTYzOiAvLyBDdHJsIDNcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxoMz48L2gzPlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTE0MTY0OiAvLyBDdHJsIDRcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxoND48L2g0PlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTE0MTY2OiAvLyBDdHJsIDZcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxoNT48L2g1PlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMTE0MTY5OiAvLyBDdHJsIDZcbiAgICAgICAgICAgICAgICBlZGl0b3IuaW5zZXJ0SHRtbChcIjxkaXYgY2xhc3M9J3NhdmV0b2ZpbGUnPnB1dCB0ZXh0PC9kaXY+XCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDExMTQzMDA6IC8vIEN0cmwgLFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb252ZXJ0IENvaW4nKTtcblxuICAgICAgICAgICAgICAgIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZFRleHQoKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbClcblxuICAgICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRIdG1sKGNvbnZlcnRDb2luKHNlbCwgXCJ5dWFuXCIsIFwiZXVyb1wiKSlcbiAgICAgICAgICAgICAgICAkKCdwOmhhcyhzcGFuLmNvc3QpJykuYWRkQ2xhc3MoJ21pZGRsZScpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cblxuICAgICAgICAgICAgY2FzZSAxMTE0MzA0OiAvLyBDdHJsIGBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdCBmYW55aScpO1xuICAgICAgICAgICAgICAgIGxldCBsYW5nID0gJChcIiNsYW5nXCIpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBsYW5ndG8gPSAkKFwiI2xhbmd0b1wiKS52YWwoKVxuXG5cblxuICAgICAgICAgICAgICAgIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZFRleHQoKS5yZXBsYWNlKC8oXFxyXFxuXFx0fFxcbnxcXHJcXHQpL2dtLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmFueWkoc2VsLCBsYW5nLCBsYW5ndG8pLnRoZW4oZnVuY3Rpb24oYWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2xhdGlvbiA9IFwiPHNwYW4gY2xhc3M9J29yaWdpbmFsJyBsYW5nPSdcIiArIGxhbmcgKyBcIicgZGF0YS1wc2V1ZG8tY29udGVudD0nXCIgKyBhYS5zcmMgKyBcIicgPiZuYnNwOzwvc3Bhbj48c3BhbiBjbGFzcz0ndHJhbnNsYXRlJyAgbGFuZz0nXCIgKyBsYW5ndG8gKyBcIicgPlwiICsgYWEudHJhbnNsYXRlICsgXCI8L3NwYW4+XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRIdG1sKHRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cblxuXG5cbiAgICAgICAgICAgIGNhc2UgNTU3MDYzODogLy8gQ3RybCBBbHQgTlxuICAgICAgICAgICAgICAgIC8vIHRhZz1cIjxiPjwvYj5cIjtcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxlbT48L2VtPlwiOyAvL2VtcGhhc2lzXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgNTU3MDYzNzogLy8gQ3RybCBBbHQgTVxuICAgICAgICAgICAgICAgIHRhZyA9IFwiPG1hcms+PC9tYXJrPlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1NTcwNjI4OiAvLyBDdHJsIEFsdCBEXG4gICAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRldGltZSA9IGQuZ2V0RnVsbFllYXIoKSArICctJyArIGQuZ2V0TW9udGgoKSArICctJyArIGQuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRhZyA9IFwiPGRlbCBkYXRldGltZT1cIiArIGRhdGV0aW1lICsgXCIgdGl0bGU9XCIgKyBkYXRldGltZSArIFwiPjwvZGl2PlwiOyAvL2RlbCB0ZXh0XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU1NzA2MzM6IC8vIEN0cmwgQWx0IElcbiAgICAgICAgICAgICAgICB0YWcgPSBcIjxlbT48L2VtPlwiOyAvL2VtcGhhc2lzXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIyMjgzMTQ6IC8vIFNoaWZ0IFogICBUZXN0XG4gICAgICAgICAgICAgICAgJChcIiNja2VfM190b3BcIikudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDMzNDI0MDg6IC8vIENUUkwgU2hpZnQgSCAgSGlkZS9zaG93IHRvb2wgYmFyXG4gICAgICAgICAgICAgICAgLy8gZXZ0LmRhdGEuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gZXZ0LmRhdGEucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKFwiI2NrZV8zX3RvcFwiKS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTExNDE5NTogLy9DdHJsIFMgc2F2ZSBhIHZlcnNpb25cbiAgICAgICAgICAgICAgICB2ZXJzaW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5zYXZldG9maWxlJykubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgc2F2ZShldnQsIFwic2F2ZXRvZmlsZVwiKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDMzNDI0MDQ6IC8vIEN0cmwgU2hpZnQgRCAgSW5zZXJ0IGRldGFpbC9TdW1tYXJ5IGh0bWxcbiAgICAgICAgICAgICAgICB2YXIgc2VsID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLmdldFNlbGVjdGVkVGV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChzZWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IG5ldyBDS0VESVRPUi5kb20uZWxlbWVudCgnZGV0YWlscycpO1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLnNldEh0bWwoJyA8c3VtbWFyeT4nICsgc2VsICsgJzwvc3VtbWFyeT48cD5Nb3JlIGluZm8gYWJvdXQgdGhlIGRldGFpbHMuPC9wPicpO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuaW5zZXJ0RWxlbWVudChkZXRhaWxzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDExMTQxOTE6IC8vIEN0cmwgTyAgT3BlbiBjb2RlU25pcHBldCBkaWFsb2dcbiAgICAgICAgICAgICAgICBlZGl0b3IuZXhlY0NvbW1hbmQoJ2NvZGVTbmlwcGV0Jyk7IC8vd2lkZ2V0XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMTExNDE4NTogLy8gQ3RybCBJICBJbnNlcnRodG1sXG4gICAgICAgICAgICAgICAgLy8gdmFyIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZFRleHQoKTtcbiAgICAgICAgICAgICAgICBjdHJsSSA9ICFjdHJsSTtcblxuICAgICAgICAgICAgICAgIC8vIGV2dC5kYXRhLmRhdGFWYWx1ZSA9IGV2dC5kYXRhLmRhdGFWYWx1ZVxuICAgICAgICAgICAgICAgIC8vIGVkaXRvci5maXJlKCAncGFzdGUnLGVkaXRvcik7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvaHRtbCcpKTtcblxuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29kZSBvYnZpb3VzbHkgd2lsbCBub3QgcHJlc2VydmUgdGhlIGNhc2Ugb2YgdGhlIGZpcnN0IGFuZCBsYXN0IGxldHRlcnMuXG4gICAgICAgICAgICAgICAgLy8gTGV0IGl0IGJlIGFuIGV4ZXJjaXNlIGZvciB0aGUgcmVhZGVyIDspLlxuICAgICAgICAgICAgICAgIC8vIGVkaXRvci5leGVjQ29tbWFuZCggJ2luc2VydGh0bWw0eCcpOyAgLy93aWRnZXRcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDExMTQxODI6IC8vIEN0cmwgRiBvcGVuIGRpYWxvZyBGaW5kIGFuZCByZXBsYWNlXG4gICAgICAgICAgICAgICAgZWRpdG9yLmV4ZWNDb21tYW5kKCdmaW5kJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzM0MjQwMjogLy8gQ3RybCBTaGlmdCBCXG4gICAgICAgICAgICAgICAgZWRpdG9yLmluc2VydEh0bWwoXCI8YnIvPlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBjYXNlIDc3OTg4Njg6Ly8gQ3RybCBBTFQgU0hJVCBUXG4gICAgICAgICAgICAgICAgLy8gICBlZGl0b3IuaW5zZXJ0SHRtbCggXCI8dGFibGUgY2xhc3M9dGFibGUxQ2xhc3MnID4gPHRib2R5PiBcXFxuICAgICAgICAgICAgICAgIC8vICAgICAgPHRyPjx0ZD4xPC90ZD48dGQ+MjwvdGQ+PC90cj48dHI+PHRkPjE8L3RkPjx0ZD4yPC90ZD48L3RyPiBcXFxuICAgICAgICAgICAgICAgIC8vICAgICAgPC90Ym9keT48L3RhYmxlPlwiKTtcbiAgICAgICAgICAgICAgICAvLyAgIC8vICBlZGl0b3IuaW5zZXJ0SHRtbCggY2xpcGJvYXJkRGF0YSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKGNsaXBib2FyZERhdGEpO1xuICAgICAgICAgICAgICAgIC8vICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzMzQyNDIyOiAvLyBDdHJvbCBzaGlmdCBWXG4gICAgICAgICAgICAgICAgdGV4dG8gPSAnQ3J0bCArIFNISUZUIFYnOyAvLyBDdHJsIDFcbiAgICAgICAgICAgICAgICAvLyB0ZXh0ID0gd2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcIlRleHRcIik7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGV4dG8pO1xuICAgICAgICAgICAgICAgIC8vIGVkaXRvci5pbnNlcnRIdG1sKCBjbGlwYm9hcmREYXRhKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXh0byk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRleHRvID0gJ090aGVyIGtleSc7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHZhciBrZXlwcmVzcyA9IFsxMTE0MTYxLCAxMTE0MTYyLCAxMTE0MTYzLCAxMTE0MTY0LCAxMTE0MTY2LCAxMTE0MTY5LCA1NTcwNjM3LCA1NTcwNjI4LCA1NTcwNjMzLCA1NTcwNjM4XTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coa2V5cHJlc3MuaW5kZXhPZihjaGFyQ29kZSkpO1xuICAgICAgICBpZiAoa2V5cHJlc3MuaW5kZXhPZihjaGFyQ29kZSkgPiAtMSkgeyAvLyByZXRhZyB0aGUgc2VsZWN0IGFyZWFcbiAgICAgICAgICAgIHZhciBzZWwgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRUZXh0KCk7XG4gICAgICAgICAgICBpZiAoc2VsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyAgdmFyIG5ld0VsZW1lbnQgPSBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQodGFnKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKHRhZylcbiAgICAgICAgICAgICAgICAvLyBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZXMoe3N0eWxlOiAnJ30pO1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQuc2V0VGV4dChzZWwpO1xuICAgICAgICAgICAgICAgIGVkaXRvci5pbnNlcnRFbGVtZW50KG5ld0VsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IG5ldyBDS0VESVRPUi5kb20uZWxlbWVudCh0YWcpO1xuICAgICAgICAgICAgICAgIC8vIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlcyh7c3R5bGU6ICcnfSk7XG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudC5zZXRUZXh0KHNlbCk7XG4gICAgICAgICAgICAgICAgLy8gIGVkaXRvci5pbnNlcnRFbGVtZW50KG5ld0VsZW1lbnQpLnNlbGVjdEVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAvLyAgZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdEVsZW1lbnQobmV3RWxlbWVudCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICB9KTtcblxuXG5cblxuXG4gICAgLy8gb3ZlcnJpZGUgc2hvcnRjdXQgZmlyZWZveCBrZXlib2FyZFxuICAgICQoJy5maXJzdF9lZGl0b3InKS5rZXlwcmVzcyhmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCc0Jyk7XG5cblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZXZlbnRvIGVzOiAnKyBldmVudC5rZXkgKydzaGlmdDogJytldmVudC5jdHJsS2V5ICsgJ2NydGw6ICcrIGV2ZW50LmN0cmxLZXkpO1xuICAgICAgICB2YXIgYSA9IGV2ZW50LmtleTtcbiAgICAgICAgdmFyIGIgPSBldmVudC5jdHJsS2V5O1xuICAgICAgICB2YXIgYyA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgICAgICB2YXIgZCA9IGV2ZW50LmFsdEtleTtcbiAgICAgICAgdmFyIHJlc3BvbnNlID0gZXZlbnQua2V5ICsgZXZlbnQuY3RybEtleSArIGV2ZW50LnNoaWZ0S2V5ICsgZXZlbnQuYWx0S2V5O1xuICAgICAgICAvLyAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhiKTtcbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG5cblxuICAgICAgICAgICAgY2FzZSAoYSA9PSAnRicgJiYgYiAmJiBjICYmIGQpOlxuICAgICAgICAgICAgICAgIHZhciBzZWwgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuZ2V0U2VsZWN0ZWRUZXh0KCk7XG4gICAgICAgICAgICAgICAgc2VsID0gc2VsLnJlcGxhY2UoL1xccysvZywgJysnKTs7IC8vcmVwbGFjZSBhbnkgc3BhY2Ugd2l0aCArXG4gICAgICAgICAgICAgICAgb3BlbkluTmV3VGFiKCdodHRwczovL2VuLndpa2lwZWRpYS5vcmcvdy9pbmRleC5waHA/c2VhcmNoPScgKyBzZWwpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgKGEgPT0gJ0YnICYmIGIgJiYgYyk6XG4gICAgICAgICAgICAgICAgdmFyIHNlbCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5nZXRTZWxlY3RlZFRleHQoKTtcbiAgICAgICAgICAgICAgICBzZWwgPSBzZWwucmVwbGFjZSgvXFxzKy9nLCAnKycpOzsgLy9yZXBsYWNlIGFueSBzcGFjZSB3aXRoICtcbiAgICAgICAgICAgICAgICBvcGVuSW5OZXdUYWIoJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9JyArIHNlbCk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuXG4gICAgICAgICAgICBjYXNlIChhID09ICdIJyAmJiBiICYmIGMpOlxuICAgICAgICAgICAgY2FzZSAoYSA9PSAncycgJiYgYik6XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy9hdm9pZCBvdGhlciBzaG9ydGN1dCBrZXlzXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAvLyBjYXNlIChhID09ICdMJyAmJiBiICAmJiBjKSA6IC8vIEN0cmwgU2hpZnQgTFxuICAgICAgICAgICAgICAgIC8vICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy9hdm9pZCBvdGhlciBzaG9ydGN1dCBrZXlzXG4gICAgICAgICAgICAgICAgLy8gICAgIHRleHQgPSBlZGl0b3IuZ2V0Q2xpcGJvYXJkRGF0YShcIlRleHRcIik7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICAgIGNvbnNvbGUubG9nKHRleHQpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gYnJlYWs7XG5cblxuXG5cbiAgICAgICAgICAgIGNhc2UgKGEgPT0gJ2knICYmIGIgJiYgZCk6IC8vQ3RybCBBbHQgaVxuICAgICAgICAgICAgICAgIGVkaXRvci5leGVjQ29tbWFuZCgnbWF0aGpheCcpOyAvL3dpZGdldFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIChhID09ICdpJyAmJiBiKTpcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncHJlc3MgY3RybCBJJyk7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy9hdm9pZCBvdGhlciBzaG9ydGN1dCBrZXlzXG5cbiAgICAgICAgICAgICAgICBlZGl0b3IuZXhlY0NvbW1hbmQoJ2luc2VydGh0bWw0eCcpOyAvL3dpZGdldFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG5cblxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBpZiAoZXZlbnQua2V5ID09PSAnSCcgJiYgZXZlbnQuY3RybEtleSAmJiBldmVudC5zaGlmdEtleSAgKVxuICAgICAgICAvLyAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gaWYgKGV2ZW50LmtleSA9PT0gJ3MnICYmIGV2ZW50LmN0cmxLZXkgIClcbiAgICAgICAgLy8gICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cblxuICAgIGVkaXRvci5vbigncGFzdGUnLCBmdW5jdGlvbihldnQpIHtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBpZiAoIGN0cmxJID09IDEpe1xuICAgICAgICAvL1xuICAgICAgICAvLyAgIC8vIHZhciBodG1sID0gZWRpdG9yLmdldENsaXBib2FyZERhdGEoXCJUZXh0XCIpO1xuICAgICAgICAvLyAgIC8vIGNvbnNvbGUubG9nIChcInBhc3RlIGV2ZW50XCIgKyBodG1sKTtcbiAgICAgICAgLy8gICAvLyBlZGl0b3IuaW5zZXJ0SHRtbChodG1sKTtcbiAgICAgICAgLy8gICBjdHJsST0wO1xuICAgICAgICAvLyAgIGVkaXRvci5nZXRDbGlwYm9hcmREYXRhKCB7IHRpdGxlOiAnR2V0IG15IGRhdGEnIH0sIGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAvLyAgICAgICBpZiAoIGRhdGEgKVxuICAgICAgICAvLyAgICAgICAgICAgY29uc29sZS5sb2coICdkYXRhIGlzOiAnICsgZGF0YS5kYXRhVmFsdWUgKTtcbiAgICAgICAgLy8gICB9ICk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIH1cbiAgICAgICAgLy9cblxuXG5cblxuICAgICAgICAvLyBoaWdobGlnaHRqc3dvcmtlcnMoKTtcbiAgICB9KTtcblxuXG4gICAgZWRpdG9yLm9uKCdmb2N1cycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAvLyBoaWdobGlnaHRqc3dvcmtlcnMoKTtcbiAgICB9KTtcblxuICAgIGVkaXRvci5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcblxuICAgIH0pO1xuXG4gICAgZWRpdG9yLm9uKCdkb3VibGVjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGV2dC5kYXRhLmVsZW1lbnQ7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2RvdWJsZWNsaWNrJyk7XG4gICAgICAgIGNsYXNzZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdkb3VibGVjbGljayBpbiBjbGFzcyAnICsgY2xhc3NlKVxuICAgICAgICBpZiAoY2xhc3NlID09ICdqaWViYScpe1xuXG4gICAgICAgICAgIHRyYW5zbGF0ZV9zZWxlY3QoKTtcblxuXG5cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhc3NlID09ICd2aWRlb2xpbmsnKSB7XG4gICAgICAgICAgICBsb2FkVmlkZW8oZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgaWYgKGNsYXNzZSA9PSAndmlkZW9saW5rJykge1xuICAgICAgICAgICAgbG9hZFZpZGVvKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YWcgPSBlbGVtZW50LmdldE5hbWUoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codGFnKTtcbiAgICAgICAgaWYgKHRhZyA9PSAnYScpIHtcbiAgICAgICAgICAgIHVybCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcbiAgICAgICAgICAgIG9wZW5Jbk5ld1RhYih1cmwpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cgKCdjbGljayBsaW5rJysgdXJsKTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG5cblxuICAgIGVkaXRvci5vbignYmx1cicsIGZ1bmN0aW9uKGV2dCkge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiYmx1cnJcIik7XG5cbiAgICAgICAgc2F2ZShldnQsIFwic2F2ZVwiKTtcbiAgICAgICAgLy8gZWRpdG9yLmZvY3VzKCk7XG5cbiAgICB9KTtcblxuXG4gICAgLy9jaGFuZ2UgZXZlbnRcbiAgICBlZGl0b3Iub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyggJ1RvdGFsIGJ5dGVzOiAnICsgZXZ0LmVkaXRvci5nZXREYXRhKCkubGVuZ3RoICk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdzYXZlZCcrJCggXCIjdGl0dGxlXCIgKS52YWwoKSk7XG4gICAgICAgIC8vICQucG9zdCggXCIvaW5jL3NhdmUucGhwXCIsIHsgZWRpdGFibGVkYXRhOiBldnQuZWRpdG9yLmdldERhdGEoKSwgZWRpdG9ySUQ6ICQoIFwiI3RpdHRsZVwiICkudmFsKCkgfSApO1xuXG4gICAgfSk7XG5cbn0pO1xuXG5cbmZ1bmN0aW9uIG9wZW5Jbk5ld1RhYih1cmwpIHtcbiAgICB2YXIgd2luID0gd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG4gICAgd2luLmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGhhc2hDb2RlKHN0cikge1xuICAgIHZhciBoYXNoID0gMDtcbiAgICBpZiAoc3RyLmxlbmd0aCA9PSAwKSByZXR1cm4gaGFzaDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcjtcbiAgICAgICAgaGFzaCA9IGhhc2ggJiBoYXNoOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICB9XG4gICAgcmV0dXJuIGhhc2g7XG59XG5cblxuZnVuY3Rpb24gY29udmVydENvaW4odmFsdWUsIGNvaW4sIHRvY29pbikge1xuICAgIGNvbnNvbGUubG9nKCdjb252ZXJ0Q29pbicpXG5cbiAgICBsZXQgYWEgPSBcIjxzcGFuIGRhdGEtY29zdD0nXCIgKyB2YWx1ZSArIFwiJyBkYXRhLWNvaW49J1wiICsgY29pbiArIFwiJyBkYXRhLWNvaW4tY29udmVydD0nXCIgKyB0b2NvaW4gKyBcIicgY2xhc3M9J2Nvc3QnPlRvIGNvbnZlcnQgXCIgKyBjb2luICsgXCIgaW50byBcIiArIHRvY29pbiArIFwiIFwiICsgdmFsdWUgKyBcIjwvc3Bhbj5cIlxuICAgIC8vICQoJ3RkIHA6aGFzKHNwYW4uY29zdCknKS5hZGRDbGFzcygnbWlkZGxlJyk7XG4gICAgcmV0dXJuIGFhXG59XG5cblxuZnVuY3Rpb24gZG9Tb21ldGhpbmcoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJJdCBpcyBkb25lLlwiKTtcbiAgICAgICAgLy8gU3VjY2VlZCBoYWxmIG9mIHRoZSB0aW1lLlxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IC41KSB7XG4gICAgICAgICAgICByZXNvbHZlKFwiU1VDQ0VTU1wiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KFwiRkFJTFVSRVwiKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZmFueWkodGV4dCwgbGFuZywgbGFuZ3RvKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEl0IGlzIGRvbmUuICR7dGV4dH0gJHtsYW5nfSAke2xhbmd0b31gKTtcbiAgICAgICAgLy8gU3VjY2VlZCBoYWxmIG9mIHRoZSB0aW1lLlxuICAgICAgICAvLyBsYW5nID0gJ3poJ1xuICAgICAgICAvLyBsYW5ndG8gPSAnZW4nXG4gICAgICAgIHZhciB1cmwgPSBkb2N1bWVudC5sb2NhdGlvbi5vcmlnaW4gKycvZmFueWknXG4gICAgICAgIHZhciBoZWFkZXJzID0ge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBcImZyb21cIjogbGFuZyxcbiAgICAgICAgICAgIFwidG9cIjogbGFuZ3RvLFxuICAgICAgICAgICAgXCJzcmNcIjogdGV4dCxcbiAgICAgICAgICAgIFwiaVwiOiAnMSdcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIHRleHQgdG8gdHJhbnNsYXRlICcgKyB0ZXh0KVxuXG4gICAgICAgIHZhciBlbmNvZGVfcGFyYW1zID0gJC5wYXJhbShkYXRhLCB0cnVlKVxuICAgICAgICB2YXIgdXJsID0gdXJsICsgJz8nICsgZW5jb2RlX3BhcmFtc1xuXG4gICAgICAgICQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKGRhdGEpIHtcblxuICAgICAgICAgICAgcmVzb2x2ZShkYXRhKVxuICAgICAgICB9KTtcblxuXG4gICAgfSlcblxufVxuXG5cblxuXG5cblxuZnVuY3Rpb24gbWVzc2FnZShzdHIpIHtcblxuICAgICQoXCIjdGV4dGluZm9cIikuaHRtbChzdHIpLmNzcyh7IG9wYWNpdHk6IDAuOTkgfSk7XG4gICAgJChcIiN0ZXh0aW5mb1wiKS5hbmltYXRlKHsgb3BhY2l0eTogMCB9LCAxMjAwKTtcbn1cblxuZnVuY3Rpb24gYmFzZW5hbWUocGF0aCwgc3VmZml4KSB7XG4gICAgdmFyIGIgPSBwYXRoXG4gICAgdmFyIGxhc3RDaGFyID0gYi5jaGFyQXQoYi5sZW5ndGggLSAxKVxuXG4gICAgaWYgKGxhc3RDaGFyID09PSAnLycgfHwgbGFzdENoYXIgPT09ICdcXFxcJykge1xuICAgICAgICBiID0gYi5zbGljZSgwLCAtMSlcbiAgICB9XG5cbiAgICBiID0gYi5yZXBsYWNlKC9eLipbXFwvXFxcXF0vZywgJycpXG5cbiAgICBpZiAodHlwZW9mIHN1ZmZpeCA9PT0gJ3N0cmluZycgJiYgYi5zdWJzdHIoYi5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSA9PT0gc3VmZml4KSB7XG4gICAgICAgIGIgPSBiLnN1YnN0cigwLCBiLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGJcbn1cblxuXG5mdW5jdGlvbiBkaXJuYW1lKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9cXFxcL2csICcvJykucmVwbGFjZSgvXFwvW15cXC9dKlxcLz8kLywgJycpXG59XG5cbmZ1bmN0aW9uIGFncmVnYXRleHQoc2VsZWN0b3IpIHtcbiAgICB2YXIgdGV4dHMgPSAnJztcblxuICAgICQoXCIuZmlyc3RfZWRpdG9yXCIpLmNoaWxkcmVuKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQodGhpcykuY2hpbGRyZW4oXCJwXCIpLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHRleHRzICs9ICQodGhpcykudGV4dCgpICsgXCJcXHJcXG5cIjtcblxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYWxsTGlzdEVsZW1lbnRzID0gJChcImxpIGJyXCIpO1xuXG4gICAgICAgICQoXCIuZmlyc3RfZWRpdG9yXCIpLmZpbmQoYWxsTGlzdEVsZW1lbnRzKS5lYWNoKGZ1bmN0aW9uKClcbiAgICAgICAgICAgIC8vICQodGhpcykubmV4dEFsbChcImxpXCIpLmVhY2goZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRleHRzICs9IFwiICBcIiArICQodGhpcykuY29udGVudHMoKS5nZXQoMCkubm9kZVZhbHVlICsgXCJcXHJcXG5cIjtcblxuICAgICAgICAgICAgfSk7XG5cblxuXG5cblxuICAgIH0pO1xuXG5cbiAgICByZXR1cm4gdGV4dHM7XG59XG5cblxuXG5cblxuXG5mdW5jdGlvbiBzYXZlKGV2dCwgYWN0aW9uKSB7XG5cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgXCJzYXZlXCI6IC8vIGVkaXRvciBzYXZlIGNvbnRlbnRcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZWRpdG9yIHNhdmUgMlwiKTtcbiAgICAgICAgICAgICQucG9zdChcIi9pbmMvc2F2ZS5waHBcIiwgeyBhY3Rpb246IFwic2F2ZVwiLCBkYXRhOiBldnQuZWRpdG9yLmdldERhdGEoKSwgcGF0aDogXCIvZGF0YS9ydzEvbTFcIiwgZmlsZTogJChcIiN0aXR0bGVcIikudmFsKCkgfSk7XG4gICAgICAgICAgICAvLyAgdG8gcHJldmVudCB0aW1lIGNvbnN1bWluZ1xuICAgICAgICAgICAgLy8gIHJlYWQoKTtcbiAgICAgICAgICAgIG1lc3NhZ2UoXCJmaWxlIHNhdmVkXCIpO1xuXG5cblxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNhdmV0b2ZpbGVcIjpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2F2ZSB0ZXh0XCIpO1xuICAgICAgICAgICAgdmFyIGZpbGUgPSAkKFwiLmZpcnN0X2VkaXRvclwiKS5jaGlsZHJlbihcIi5wYXRoXCIpLnRleHQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpO1xuICAgICAgICAgICAgbWVzc2FnZShcImZpbGUgc2F2ZWQgXCIgKyBmaWxlKTtcblxuXG4gICAgICAgICAgICAvLyB2YXIgZmlsZSA9IFwiL2RhdGEvbTMvbW0ubW1cIjtcbiAgICAgICAgICAgIHZhciBwYXRoID0gZGlybmFtZShmaWxlKTtcbiAgICAgICAgICAgIHZhciBmaWxlID0gYmFzZW5hbWUoZmlsZSwgJycpO1xuICAgICAgICAgICAgLy8gdmFyIGRhdGE9Jyc7XG4gICAgICAgICAgICAvLyAkKFwiI3NhdmV0b2ZpbGVcIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgIGRhdGEgPSBkYXRhICArICAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICAgLy8gICAgLy9jb2RlXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIGRhdGEgPSBhZ3JlZ2F0ZXh0KFwiLnNhdmV0b2ZpbGVcIik7XG4gICAgICAgICAgICAvLyAgZGF0YT1cInRlc3RcIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTtcblxuICAgICAgICAgICAgJC5wb3N0KFwiL2luYy9zYXZlLnBocFwiLCB7IGFjdGlvbjogXCJzYXZlXCIsIGRhdGE6IGRhdGEsIHBhdGg6IHBhdGgsIGZpbGU6IGZpbGUgfSk7XG5cblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGF0aC5iYXNlbmFtZShzdHIsICcuaHRtbCcpKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG5cblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzYXZlIGRlZmF1bHRcIik7XG5cbiAgICB9XG5cblxuXG5cbiAgICAvLyAgY29uc29sZS5sb2coXCJoYXNjb2RlIGlzIGlzOiBcIiArIGhhc2hDb2RlKCQoIFwiI2hpZGRlblwiICkudGV4dCgpKSk7XG4gICAgLy8gY29uc29sZS5sb2cgKFwiMSBcIiAraGFzaENvZGUoJCggXCIjaGlkZGVuXCIgKS50ZXh0KCkpKTtcbiAgICAvLyBjb25zb2xlLmxvZyAoXCIyIFwiICskKCBcIiNoYXNoXCIgKS50ZXh0KCkpO1xuXG59XG5cblxuZnVuY3Rpb24gcmVhZCgpIHtcblxuXG5cbiAgICAkLmdldCgnL20xLycgKyAkKFwiI3RpdHRsZVwiKS52YWwoKSwgeyBcIl9cIjogJC5ub3coKSB9LCBmdW5jdGlvbihkYXRhMikge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlYWRpbmcgZmlsZSBcIiArICcvbTEvJyArICQoXCIjdGl0dGxlXCIpLnZhbCgpKTtcblxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAvLyAgJCgnI2hpZGRlbicpLmh0bWwoZGF0YTIpO1xuICAgICAgICAkKCcuZmlyc3RfZWRpdG9yJykuaHRtbChkYXRhMik7XG5cbiAgICAgICAgaGlnaGxpZ2h0anN3b3JrZXJzKCk7XG5cblxuICAgICAgICAvLyAkKCcuZmlyc3RfZWRpdG9yJykuaHRtbChkYXRhKTtcblxuICAgIH0pLmRvbmUoZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAvLyBpZiAoaGFzaENvZGUoJCggXCIjaGlkZGVuXCIgKS50ZXh0KCkpID09ICQoIFwiI2hhc2hcIiApLnRleHQoKSAgIClcbiAgICAgICAgLy8gbWVzc2FnZShcIm5vIG1vZGlmaWF0aW9uc1wiKTtcbiAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgIC8vICAgbWVzc2FnZSAoXCJzYXZlZCFcIilcbiAgICAgICAgLy8gICAkKCBcIiNoYXNoXCIgKS5odG1sKGhhc2hDb2RlKCQoIFwiI2hpZGRlblwiICkudGV4dCgpKSk7fVxuICAgICAgICAvL1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vJCgnLmZpcnN0X2VkaXRvcicpLmh0bWwoXCI8aDE+ZXJyb3IgNDA0IG5vIGZpbGU8L2gxPlwiKTsgLy8gb3Igd2hhdGV2ZXJcbiAgICB9LCAndGV4dCcpO1xuXG59XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodGpzd29ya2VycygpIHtcblxuICAgIC8vIGhsanMuaW5pdEhpZ2hsaWdodGluZ09uTG9hZCgpO1xuICAgICQoJ3ByZSBjb2RlJykuZWFjaChmdW5jdGlvbihpLCBibG9jaykge1xuICAgICAgICBobGpzLmhpZ2hsaWdodEJsb2NrKGJsb2NrKTtcbiAgICB9KTtcblxuICAgIC8vICB2YXIgY29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ByZSBjb2RlJyk7XG4gICAgLy8gIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKCcvanMvd29ya2VyLmpzJyk7XG4gICAgLy8gIGlmICghd29ya2VyLm9ubWVzc2FnZSkgey8vYXZvaWQgbnVsbCBvYmplY3QgaW4gY2FzZSBkb2VzbnQgZXhpc3RzXG4gICAgLy8gIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyBjb2RlLmlubmVySFRNTCA9IGV2ZW50LmRhdGE7IH1cbiAgICAvLyAvLyB3b3JrZXIucG9zdE1lc3NhZ2UoY29kZS50ZXh0Q29udGVudCk7XG4gICAgLy8gfVxufTtcblxuXG4vL3JlbmFtZSBmaWxlXG5mdW5jdGlvbiByZW5hbWUoKSB7XG5cbiAgICBjb25zb2xlLmxvZyhcImNoYW5nZSB0aGlzIGZpbGU6IFwiICsgJChcIiN0aXR0bGVcIikudmFsKCkgKyBcIiBieSB0aGlzIGZpbGU6IFwiICsgJChcIiNyZW5hbWVcIikudmFsKCkpO1xuICAgICQucG9zdChcIi9pbmMvc2F2ZS5waHBcIiwgeyBhY3Rpb246IFwicmVuYW1lXCIsIGZpbGU6ICQoXCIjdGl0dGxlXCIpLnZhbCgpLCBwYXRoOiBcIi9kYXRhL3J3MS9tMVwiLCBmaWxlb3V0OiAkKFwiI3JlbmFtZVwiKS52YWwoKSB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIjdGl0dGxlXCIpLnZhbCgkKFwiI3JlbmFtZVwiKS52YWwoKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbWVzc2FnZShcImZpbGUgcmVuYW1lZCB0byBcIiArICQoXCIjcmVuYW1lXCIpLnZhbCgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbGVydChcImVycm9yXCIpO1xuICAgICAgICB9KTtcblxufTtcblxuXG4vL3JlbmFtZSBmaWxlXG5mdW5jdGlvbiB2ZXJzaW9uKCkge1xuXG4gICAgY29uc29sZS5sb2coXCJjcmVhdGluZyBhIG5ldyB2ZXJzaW9uIG9mIHRoaXM6IFwiICsgJChcIiN0aXR0bGVcIikudmFsKCkpO1xuXG4gICAgJC5wb3N0KFwiL2luYy9zYXZlLnBocFwiLCB7IGFjdGlvbjogXCJ2ZXJzaW9uXCIsIGZpbGU6ICQoXCIjdGl0dGxlXCIpLnZhbCgpLCBwYXRoOiBcIi9kYXRhL3J3MS9tMVwiLCBmaWxlb3V0OiAkKFwiI3JlbmFtZVwiKS52YWwoKSB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIjdGl0dGxlXCIpLnZhbCgkKFwiI3JlbmFtZVwiKS52YWwoKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbWVzc2FnZShcIk5ldyB2ZXJzaW9uIGJhY2tlZFwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbGVydChcImVycm9yXCIpO1xuICAgICAgICB9KTtcblxufTtcblxuXG5cblxuXG5cbmZ1bmN0aW9uIGxvYWRhdXRvc2VhcmNoKHNvdXJjZSkge1xuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIHVybDogc291cmNlLFxuICAgICAgICBnZXRWYWx1ZTogXCJmaWxlbmFtZVwiLFxuICAgICAgICAvLyBtaW5MZW5ndGg6IDMsXG4gICAgICAgIC8vICBhdXRvRm9jdXM6IHRydWUsXG4gICAgICAgIC8vICBteSA6IFwiMTAwIDEwMFwiLFxuICAgICAgICAvLyAgYXQ6IFwiYm90dG9tXCIgLFxuICAgICAgICAvLyAgb2Y6XCIjdGl0dGxlXCIsXG5cbiAgICAgICAgdGVtcGxhdGU6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZGVzY3JpcHRpb25cIixcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIC8vIGRlc2NyaXB0aW9uOiBcImVtYWlsXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGlzdDoge1xuICAgICAgICAgICAgbWF0Y2g6IHtcbiAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdGhlbWU6IFwicGxhdGUtZGFya1wiXG4gICAgfTtcblxuICAgICQoXCIjdGl0dGxlXCIpLmVhc3lBdXRvY29tcGxldGUob3B0aW9ucyk7XG5cbn07XG5cblxuXG5cbmZ1bmN0aW9uIGxvYWRWaWRlbyhlbGVtZW50KSB7XG5cbiAgICBjb25zb2xlLmxvZygnZWxlbWVudCBpcyB2aWRlb2xpbmsnKTtcbiAgICBjb25zb2xlLmxvZyhlbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKTtcbiAgICBzcmMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpO1xuICAgIC8vICQoJ3ZpZGVvLnZpZGVvcmVhZCBzb3VyY2UnKS5hdHRyKCdzcmMnLCBzcmMpO1xuICAgICQoJyNteS1wbGF5ZXJfaHRtbDVfYXBpJykuYXR0cignc3JjJywgc3JjKTtcbiAgICAkKCcjbXktcGxheWVyX2h0bWw1X2FwaScpLmxvYWQoKTtcbiAgICAkKCcjbXktcGxheWVyX2h0bWw1X2FwaScpLnBsYXkoKTtcbiAgICAvLyAkKFwidmlkZW8udmlkZW9yZWFkXCIpWzBdLmxvYWQoKTtcbiAgICAvLyAkKFwidmlkZW8udmlkZW9yZWFkXCIpWzBdLnBsYXkoKTtcbiAgICAvLyBldnQuZGF0YS5kaWFsb2cgPSAndGFibGVQcm9wZXJ0aWVzJyAgIDtcblxufVxuXG5cblxuZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lKG5hbWUsIHVybCkge1xuICAgIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlxcXFwkJlwiKTtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiKD0oW14mI10qKXwmfCN8JClcIiksXG4gICAgICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gICAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG59XG5cblxuZnVuY3Rpb24gaW5zZXJ0QmFpZHVtYXAoKSB7XG5cblxuICAgIHZhciBtYXAgPSBuZXcgQk1hcC5NYXAoXCJhbGxtYXBcIik7IC8vIOWIm+W7uk1hcOWunuS+i1xuICAgIG1hcC5jZW50ZXJBbmRab29tKG5ldyBCTWFwLlBvaW50KDExNi40MDQsIDM5LjkxNSksIDExKTsgLy8g5Yid5aeL5YyW5Zyw5Zu+LOiuvue9ruS4reW/g+eCueWdkOagh+WSjOWcsOWbvue6p+WIq1xuICAgIC8v5re75Yqg5Zyw5Zu+57G75Z6L5o6n5Lu2XG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuTWFwVHlwZUNvbnRyb2woe1xuICAgICAgICBtYXBUeXBlczogW1xuICAgICAgICAgICAgQk1BUF9OT1JNQUxfTUFQLFxuICAgICAgICAgICAgQk1BUF9IWUJSSURfTUFQXG4gICAgICAgIF1cbiAgICB9KSk7XG4gICAgbWFwLnNldEN1cnJlbnRDaXR5KFwi5YyX5LqsXCIpOyAvLyDorr7nva7lnLDlm77mmL7npLrnmoTln47luIIg5q2k6aG55piv5b+F6aG76K6+572u55qEXG4gICAgbWFwLmVuYWJsZVNjcm9sbFdoZWVsWm9vbSh0cnVlKTsgLy/lvIDlkK/pvKDmoIfmu5rova7nvKnmlL5cblxufSIsIi8qIVxuICogbW9uZXkuanMgLyBmeCgpIHYwLjJcbiAqIENvcHlyaWdodCAyMDE0IE9wZW4gRXhjaGFuZ2UgUmF0ZXNcbiAqXG4gKiBKYXZhU2NyaXB0IGxpYnJhcnkgZm9yIHJlYWx0aW1lIGN1cnJlbmN5IGNvbnZlcnNpb24gYW5kIGV4Y2hhbmdlIHJhdGUgY2FsY3VsYXRpb24uXG4gKlxuICogRnJlZWx5IGRpc3RyaWJ1dGFibGUgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogUG9ydGlvbnMgb2YgbW9uZXkuanMgYXJlIGluc3BpcmVkIGJ5IG9yIGJvcnJvd2VkIGZyb20gdW5kZXJzY29yZS5qc1xuICpcbiAqIEZvciBkZXRhaWxzLCBleGFtcGxlcyBhbmQgZG9jdW1lbnRhdGlvbjpcbiAqIGh0dHA6Ly9vcGVuZXhjaGFuZ2VyYXRlcy5naXRodWIuaW8vbW9uZXkuanMvXG4gKi9cbihmdW5jdGlvbihyb290LCB1bmRlZmluZWQpIHtcblxuXHQvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgbW9uZXkuanMgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG5cdHZhciBmeCA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdHJldHVybiBuZXcgZnhXcmFwcGVyKG9iaik7XG5cdH07XG5cblx0Ly8gQ3VycmVudCB2ZXJzaW9uLlxuXHRmeC52ZXJzaW9uID0gJzAuMic7XG5cblxuXHQvKiAtLS0gU2V0dXAgLS0tICovXG5cblx0Ly8gZnhTZXR1cCBjYW4gYmUgZGVmaW5lZCBiZWZvcmUgbG9hZGluZyBtb25leS5qcywgdG8gc2V0IHRoZSBleGNoYW5nZSByYXRlcyBhbmQgdGhlIGJhc2Vcblx0Ly8gKGFuZCBkZWZhdWx0IGZyb20vdG8pIGN1cnJlbmNpZXMgLSBvciB0aGUgcmF0ZXMgY2FuIGJlIGxvYWRlZCBpbiBsYXRlciBpZiBuZWVkZWQuXG5cdHZhciBmeFNldHVwID0gcm9vdC5meFNldHVwIHx8IHtcblx0XHRyYXRlcyA6IHt9LFxuXHRcdGJhc2UgOiBcIlwiXG5cdH07XG5cblx0Ly8gT2JqZWN0IGNvbnRhaW5pbmcgZXhjaGFuZ2UgcmF0ZXMgcmVsYXRpdmUgdG8gdGhlIGZ4LmJhc2UgY3VycmVuY3ksIGVnIHsgXCJHQlBcIiA6IFwiMC42NFwiIH1cblx0ZngucmF0ZXMgPSBmeFNldHVwLnJhdGVzO1xuXG5cdC8vIERlZmF1bHQgZXhjaGFuZ2UgcmF0ZSBiYXNlIGN1cnJlbmN5IChlZyBcIlVTRFwiKSwgd2hpY2ggYWxsIHRoZSBleGNoYW5nZSByYXRlcyBhcmUgcmVsYXRpdmUgdG9cblx0ZnguYmFzZSA9IGZ4U2V0dXAuYmFzZTtcblxuXHQvLyBEZWZhdWx0IGZyb20gLyB0byBjdXJyZW5jaWVzIGZvciBjb252ZXJzaW9uIHZpYSBmeC5jb252ZXJ0KCk6XG5cdGZ4LnNldHRpbmdzID0ge1xuXHRcdGZyb20gOiBmeFNldHVwLmZyb20gfHwgZnguYmFzZSxcblx0XHR0byA6IGZ4U2V0dXAudG8gfHwgZnguYmFzZVxuXHR9O1xuXG5cblx0LyogLS0tIENvbnZlcnNpb24gLS0tICovXG5cblx0Ly8gVGhlIGJhc2UgZnVuY3Rpb24gb2YgdGhlIGxpYnJhcnk6IGNvbnZlcnRzIGEgdmFsdWUgZnJvbSBvbmUgY3VycmVuY3kgdG8gYW5vdGhlclxuXHR2YXIgY29udmVydCA9IGZ4LmNvbnZlcnQgPSBmdW5jdGlvbih2YWwsIG9wdHMpIHtcblx0XHQvLyBDb252ZXJ0IGFycmF5cyByZWN1cnNpdmVseVxuXHRcdGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwubGVuZ3RoKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaTwgdmFsLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWxbaV0gPSBjb252ZXJ0KHZhbFtpXSwgb3B0cyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB3ZSBnb3RzIHNvbWUgb3B0c1xuXHRcdG9wdHMgPSBvcHRzIHx8IHt9O1xuXG5cdFx0Ly8gV2UgbmVlZCB0byBrbm93IHRoZSBgZnJvbWAgYW5kIGB0b2AgY3VycmVuY2llc1xuXHRcdGlmKCAhb3B0cy5mcm9tICkgb3B0cy5mcm9tID0gZnguc2V0dGluZ3MuZnJvbTtcblx0XHRpZiggIW9wdHMudG8gKSBvcHRzLnRvID0gZnguc2V0dGluZ3MudG87XG5cblx0XHQvLyBNdWx0aXBsZSB0aGUgdmFsdWUgYnkgdGhlIGV4Y2hhbmdlIHJhdGVcblx0XHRyZXR1cm4gdmFsICogZ2V0UmF0ZSggb3B0cy50bywgb3B0cy5mcm9tICk7XG5cdH07XG5cblx0Ly8gUmV0dXJucyB0aGUgZXhjaGFuZ2UgcmF0ZSB0byBgdGFyZ2V0YCBjdXJyZW5jeSBmcm9tIGBiYXNlYCBjdXJyZW5jeVxuXHR2YXIgZ2V0UmF0ZSA9IGZ1bmN0aW9uKHRvLCBmcm9tKSB7XG5cdFx0Ly8gU2F2ZSBieXRlcyBpbiBtaW5pZmllZCB2ZXJzaW9uXG5cdFx0dmFyIHJhdGVzID0gZngucmF0ZXM7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGJhc2UgcmF0ZSBpcyBpbiB0aGUgcmF0ZXMgb2JqZWN0OlxuXHRcdHJhdGVzW2Z4LmJhc2VdID0gMTtcblxuXHRcdC8vIFRocm93IGFuIGVycm9yIGlmIGVpdGhlciByYXRlIGlzbid0IGluIHRoZSByYXRlcyBhcnJheVxuXHRcdGlmICggIXJhdGVzW3RvXSB8fCAhcmF0ZXNbZnJvbV0gKSB0aHJvdyBcImZ4IGVycm9yXCI7XG5cblx0XHQvLyBJZiBgZnJvbWAgY3VycmVuY3kgPT09IGZ4LmJhc2UsIHJldHVybiB0aGUgYmFzaWMgZXhjaGFuZ2UgcmF0ZSBmb3IgdGhlIGB0b2AgY3VycmVuY3lcblx0XHRpZiAoIGZyb20gPT09IGZ4LmJhc2UgKSB7XG5cdFx0XHRyZXR1cm4gcmF0ZXNbdG9dO1xuXHRcdH1cblxuXHRcdC8vIElmIGB0b2AgY3VycmVuY3kgPT09IGZ4LmJhc2UsIHJldHVybiB0aGUgYmFzaWMgaW52ZXJzZSByYXRlIG9mIHRoZSBgZnJvbWAgY3VycmVuY3lcblx0XHRpZiAoIHRvID09PSBmeC5iYXNlICkge1xuXHRcdFx0cmV0dXJuIDEgLyByYXRlc1tmcm9tXTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2UsIHJldHVybiB0aGUgYHRvYCByYXRlIG11bHRpcGxlZCBieSB0aGUgaW52ZXJzZSBvZiB0aGUgYGZyb21gIHJhdGUgdG8gZ2V0IHRoZVxuXHRcdC8vIHJlbGF0aXZlIGV4Y2hhbmdlIHJhdGUgYmV0d2VlbiB0aGUgdHdvIGN1cnJlbmNpZXNcblx0XHRyZXR1cm4gcmF0ZXNbdG9dICogKDEgLyByYXRlc1tmcm9tXSk7XG5cdH07XG5cblxuXHQvKiAtLS0gT09QIHdyYXBwZXIgYW5kIGNoYWluaW5nIC0tLSAqL1xuXG5cdC8vIElmIGZ4KHZhbCkgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIE9PLXN0eWxlXG5cdHZhciBmeFdyYXBwZXIgPSBmdW5jdGlvbih2YWwpIHtcblx0XHQvLyBFeHBlcmltZW50YWw6IHBhcnNlIHN0cmluZ3MgdG8gcHVsbCBvdXQgY3VycmVuY3kgY29kZSBhbmQgdmFsdWU6XG5cdFx0aWYgKCB0eXBlb2ZcdHZhbCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRoaXMuX3YgPSBwYXJzZUZsb2F0KHZhbC5yZXBsYWNlKC9bXjAtOS0uXS9nLCBcIlwiKSk7XG5cdFx0XHR0aGlzLl9meCA9IHZhbC5yZXBsYWNlKC8oW15BLVphLXpdKS9nLCBcIlwiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fdiA9IHZhbDtcblx0XHR9XG5cdH07XG5cblx0Ly8gRXhwb3NlIGB3cmFwcGVyLnByb3RvdHlwZWAgYXMgYGZ4LnByb3RvdHlwZWBcblx0dmFyIGZ4UHJvdG8gPSBmeC5wcm90b3R5cGUgPSBmeFdyYXBwZXIucHJvdG90eXBlO1xuXG5cdC8vIGZ4KHZhbCkuY29udmVydChvcHRzKSBkb2VzIHRoZSBzYW1lIHRoaW5nIGFzIGZ4LmNvbnZlcnQodmFsLCBvcHRzKVxuXHRmeFByb3RvLmNvbnZlcnQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdFx0YXJncy51bnNoaWZ0KHRoaXMuX3YpO1xuXHRcdHJldHVybiBjb252ZXJ0LmFwcGx5KGZ4LCBhcmdzKTtcblx0fTtcblxuXHQvLyBmeCh2YWwpLmZyb20oY3VycmVuY3kpIHJldHVybnMgYSB3cmFwcGVkIGBmeGAgd2hlcmUgdGhlIHZhbHVlIGhhcyBiZWVuIGNvbnZlcnRlZCBmcm9tXG5cdC8vIGBjdXJyZW5jeWAgdG8gdGhlIGBmeC5iYXNlYCBjdXJyZW5jeS4gU2hvdWxkIGJlIGZvbGxvd2VkIGJ5IGAudG8ob3RoZXJDdXJyZW5jeSlgXG5cdGZ4UHJvdG8uZnJvbSA9IGZ1bmN0aW9uKGN1cnJlbmN5KSB7XG5cdFx0dmFyIHdyYXBwZWQgPSBmeChjb252ZXJ0KHRoaXMuX3YsIHtmcm9tOiBjdXJyZW5jeSwgdG86IGZ4LmJhc2V9KSk7XG5cdFx0d3JhcHBlZC5fZnggPSBmeC5iYXNlO1xuXHRcdHJldHVybiB3cmFwcGVkO1xuXHR9O1xuXG5cdC8vIGZ4KHZhbCkudG8oY3VycmVuY3kpIHJldHVybnMgdGhlIHZhbHVlLCBjb252ZXJ0ZWQgZnJvbSBgZnguYmFzZWAgdG8gYGN1cnJlbmN5YFxuXHRmeFByb3RvLnRvID0gZnVuY3Rpb24oY3VycmVuY3kpIHtcblx0XHRyZXR1cm4gY29udmVydCh0aGlzLl92LCB7ZnJvbTogdGhpcy5fZnggPyB0aGlzLl9meCA6IGZ4LnNldHRpbmdzLmZyb20sIHRvOiBjdXJyZW5jeX0pO1xuXHR9O1xuXG5cblx0LyogLS0tIE1vZHVsZSBEZWZpbml0aW9uIC0tLSAqL1xuXG5cdC8vIEV4cG9ydCB0aGUgZnggb2JqZWN0IGZvciBDb21tb25KUy4gSWYgYmVpbmcgbG9hZGVkIGFzIGFuIEFNRCBtb2R1bGUsIGRlZmluZSBpdCBhcyBzdWNoLlxuXHQvLyBPdGhlcndpc2UsIGp1c3QgYWRkIGBmeGAgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuXHRcdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdFx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZng7XG5cdFx0fVxuXHRcdGV4cG9ydHMuZnggPSBmeDtcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyBSZXR1cm4gdGhlIGxpYnJhcnkgYXMgYW4gQU1EIG1vZHVsZTpcblx0XHRkZWZpbmUoW10sIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZ4O1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFVzZSBmeC5ub0NvbmZsaWN0IHRvIHJlc3RvcmUgYGZ4YCBiYWNrIHRvIGl0cyBvcmlnaW5hbCB2YWx1ZSBiZWZvcmUgbW9uZXkuanMgbG9hZGVkLlxuXHRcdC8vIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGxpYnJhcnkncyBgZnhgIG9iamVjdDsgZS5nLiBgdmFyIG1vbmV5ID0gZngubm9Db25mbGljdCgpO2Bcblx0XHRmeC5ub0NvbmZsaWN0ID0gKGZ1bmN0aW9uKHByZXZpb3VzRngpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gUmVzZXQgdGhlIHZhbHVlIG9mIHRoZSByb290J3MgYGZ4YCB2YXJpYWJsZTpcblx0XHRcdFx0cm9vdC5meCA9IHByZXZpb3VzRng7XG5cdFx0XHRcdC8vIERlbGV0ZSB0aGUgbm9Db25mbGljdCBmdW5jdGlvbjpcblx0XHRcdFx0Zngubm9Db25mbGljdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0Ly8gUmV0dXJuIHJlZmVyZW5jZSB0byB0aGUgbGlicmFyeSB0byByZS1hc3NpZ24gaXQ6XG5cdFx0XHRcdHJldHVybiBmeDtcblx0XHRcdH07XG5cdFx0fSkocm9vdC5meCk7XG5cblx0XHQvLyBEZWNsYXJlIGBmeGAgb24gdGhlIHJvb3QgKGdsb2JhbC93aW5kb3cpIG9iamVjdDpcblx0XHRyb290WydmeCddID0gZng7XG5cdH1cblxuXHQvLyBSb290IHdpbGwgYmUgYHdpbmRvd2AgaW4gYnJvd3NlciBvciBgZ2xvYmFsYCBvbiB0aGUgc2VydmVyOlxufSh0aGlzKSk7XG4iXX0="}